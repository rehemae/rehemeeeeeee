(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[42],{1322:function(e,t,a){e.exports=function(e,t){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=a(e),o=a(t);function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){var a,n=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)),n}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,o=!1,r=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function v(e,t){return new Promise((function(a,n){var o,r=new Image;r.onload=function(){return a(r)},r.onerror=n,0==(null!==(o=e)&&!!o.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(r.crossOrigin=t),r.src=e}))}var g,h=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),y="undefined"!=typeof File,_={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},O=h?_.touch:_.desktop,S="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,w={x:.5,y:.5},E=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,o.default.Component);var e,t,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n,o,r=u(e);return n=this,!(o=t?(a=u(this).constructor,Reflect.construct(r,arguments,a)):r.apply(this,arguments))||"object"!=typeof o&&"function"!=typeof o?p(n):o}}(n);function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),l(p(t=a.call(this,e)),"state",{drag:!1,my:null,mx:null,image:w}),l(p(t),"handleImageReady",(function(e){var a=t.getInitialSize(e.width,e.height);a.resource=e,a.x=.5,a.y=.5,a.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:a},t.props.onImageReady),t.props.onLoadSuccess(a)})),l(p(t),"clearImage",(function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:w})})),l(p(t),"handleMouseDown",(function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})})),l(p(t),"handleMouseUp",(function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())})),l(p(t),"handleMouseMove",(function(e){var a,n,o,r,l,c,i,u,d,p,m,b,f,v,g,h;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),o={mx:a=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:n=e.targetTouches?e.targetTouches[0].pageY:e.clientY},h=t.props.rotate,h=(h%=360)<0?h+360:h,t.state.mx&&t.state.my&&(r=t.state.mx-a,l=t.state.my-n,c=t.state.image.width*t.props.scale,i=t.state.image.height*t.props.scale,d=(u=t.getCroppingRect()).x,p=u.y,d*=c,p*=i,m=function(e){return e*(Math.PI/180)},b=Math.cos(m(h)),v=p+-r*(f=Math.sin(m(h)))+l*b,g={x:(d+r*b+l*f)/c+1/t.props.scale*t.getXScale()/2,y:v/i+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(g),o.image=s(s({},t.state.image),g)),t.setState(o),t.props.onMouseMove(e))})),l(p(t),"setCanvas",(function(e){t.canvas=e})),t.canvas=null,t}return e=n,(t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(S=1);var e,t,a=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(a),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=O.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),h&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===w||this.clearImage();var a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(a),this.paintImage(a,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=O.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),h&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,a=e.height,n=e.rotate,o=e.border,r={},l=m(this.getBorders(o),2),c=l[0],i=l[1],s=t,u=a;return this.isVertical()?(r.width=u,r.height=s):(r.width=s,r.height=u),r.width+=2*c,r.height+=2*i,{canvas:r,rotate:n,width:t,height:a,border:o}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var a=document.createElement("canvas");this.isVertical()?(a.width=e.height,a.height=e.width):(a.width=e.width,a.height=e.height);var n=a.getContext("2d");return n.translate(a.width/2,a.height/2),n.rotate(this.props.rotate*Math.PI/180),n.translate(-a.width/2,-a.height/2),this.isVertical()&&n.translate((a.width-a.height)/2,(a.height-a.width)/2),t.backgroundColor&&(n.fillStyle=t.backgroundColor,n.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),n.drawImage(t.resource,-e.x,-e.y),a}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,a=e.height,n=document.createElement("canvas");return this.isVertical()?(n.width=a,n.height=t):(n.width=t,n.height=a),this.paintImage(n.getContext("2d"),this.state.image,0,1),n}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),a=1/this.props.scale*this.getYScale(),n={x:e.x-t/2,y:e.y-a/2,width:t,height:a},o=0,r=1-n.width,l=0,c=1-n.height;return(this.props.disableBoundaryChecks||1<t||1<a)&&(o=-n.width,l=-n.height,c=r=1),s(s({},n),{},{x:Math.max(o,Math.min(n.x,r)),y:Math.max(l,Math.min(n.y,c))})}},{key:"loadImage",value:function(e){var t;y&&e instanceof File?this.loadingImage=(t=e,new Promise((function(e,a){var n=new FileReader;n.onload=function(t){try{var n=v(t.target.result);e(n)}catch(t){a(t)}},n.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof e&&(this.loadingImage=v(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var a,n,o=this.getDimensions();return t/e<o.height/o.width?n=e*((a=this.getDimensions().height)/t):a=t*((n=this.getDimensions().width)/e),{height:a,width:n}}},{key:"paintImage",value:function(e,t,a,n){var o,r=3<arguments.length&&void 0!==n?n:S;t.resource&&(o=this.calculatePosition(t,a),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,o.x,o.y,o.width,o.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(o.x,o.y,o.width,o.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var a=m(this.getBorders(t),2),n=a[0],o=a[1],r=this.getCroppingRect(),l=e.width*this.props.scale,c=e.height*this.props.scale,i=-r.x*l,s=-r.y*c;return this.isVertical()?(i+=o,s+=n):(i+=n,s+=o),{x:i,y:s,height:c,width:l}}},{key:"paint",value:function(e){e.save(),e.scale(S,S),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,a,n,o,r,l,c,i,s=this.props.borderRadius,u=this.getDimensions(),d=m(this.getBorders(u.border),2),p=d[0],b=d[1],f=u.canvas.height,v=u.canvas.width;s=Math.max(s,0),s=Math.min(s,v/2-p,f/2-b),e.beginPath(),t=e,o=v-2*(a=p),r=f-2*(n=b),0===(l=s)?t.rect(a,n,o,r):(c=o-l,i=r-l,t.translate(a,n),t.arc(l,l,l,Math.PI,1.5*Math.PI),t.lineTo(c,0),t.arc(c,l,l,1.5*Math.PI,2*Math.PI),t.lineTo(o,i),t.arc(c,i,l,2*Math.PI,.5*Math.PI),t.lineTo(l,r),t.arc(l,i,l,.5*Math.PI,Math.PI),t.translate(-a,-n)),e.rect(v,0,-v,f),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),a=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,function(e,t){if(null==e)return{};var a,n=function(e,t){if(null==e)return{};for(var a,n={},o=Object.keys(e),r=0;r<o.length;r++)a=o[r],0<=t.indexOf(a)||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),r=0;r<o.length;r++)a=o[r],0<=t.indexOf(a)||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a]);return n}(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),n=this.getDimensions(),r={width:n.canvas.width,height:n.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},l={width:n.canvas.width*S,height:n.canvas.height*S,style:s(s({},r),t)};return l[O.react.down]=this.handleMouseDown,h&&(l[O.react.mouseDown]=this.handleMouseDown),o.default.createElement("canvas",c({ref:this.setCanvas},l,a))}}])&&r(e.prototype,t),n}();return l(E,"propTypes",{scale:n.default.number,rotate:n.default.number,image:n.default.oneOfType([n.default.string].concat(function(e){if(Array.isArray(e))return f(e)}(g=y?[n.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(g)||b(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:n.default.oneOfType([n.default.number,n.default.arrayOf(n.default.number)]),borderRadius:n.default.number,width:n.default.number,height:n.default.number,position:n.default.shape({x:n.default.number,y:n.default.number}),color:n.default.arrayOf(n.default.number),backgroundColor:n.default.string,crossOrigin:n.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:n.default.func,onLoadSuccess:n.default.func,onImageReady:n.default.func,onImageChange:n.default.func,onMouseUp:n.default.func,onMouseMove:n.default.func,onPositionChange:n.default.func,disableBoundaryChecks:n.default.bool,disableHiDPIScaling:n.default.bool,disableCanvasRotation:n.default.bool}),l(E,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),E}(a(34),a(0))},1479:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(8),o=a(18),r=a(25);function l(e){return function(t){return t.lift(new c(e))}}var c=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.callback))},e}(),i=function(e){function t(t,a){var n=e.call(this,t)||this;return n.add(new r.a(a)),n}return n.a(t,e),t}(o.a)},1542:function(e,t,a){"use strict";a.d(t,"a",(function(){return aa}));var n=a(0),o=a.n(n),r=a(329),l=a(55),c=a(132),i=a(349),s=a(351),u=a(350),d=a(258),p=a(895),m=a(894),b=a(898),f=a(897),v=a(893),g=a(1479),h=a(218),y=a(892),_=a(57),O=a(1),S=a(2),w=a(15),E=a(4),j=a(10),k=a(141),C=a(1322),x=a.n(C),P=a(99),I=a(171),N=a.n(I);function M(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A(e,t){return e(t={exports:{}},t.exports),t.exports}var D=A((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}));M(D);var T=A((function(e){e.exports=function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r=[],l=!0,c=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(r.push(n.value),!t||r.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{l||null==a.return||a.return()}finally{if(c)throw o}}return r}},e.exports.__esModule=!0,e.exports.default=e.exports}));M(T);var U=A((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n},e.exports.__esModule=!0,e.exports.default=e.exports}));M(U);var L=A((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}));M(L);var B=A((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}));M(B);var F,R,H,q,W,G,V=M(A((function(e){e.exports=function(e,t){return D(e)||T(e,t)||L(e,t)||B()},e.exports.__esModule=!0,e.exports.default=e.exports}))),z=M(A((function(e){function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}))),Y=M(A((function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}))),J=M(A((function(e){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports})));!function(e){e.coursesProgressModal="coursesProgressModal",e.userBadgesModal="userBadgesModal",e.editProfileModal="editProfileModal",e.userCodesModal="userCodesModal",e.resetCourseModal="resetCourseModal",e.deleteCourseModal="deleteCourseModal",e.codesModal="codesModal",e.deleteCodeModal="deleteCodeModal",e.badgesModal="badgesModal",e.certificateModal="certificateModal",e.cancelSubscription="cancelSubscription",e.succeedCancelSubscription="succeedCancelSubscription",e.connectLinkedinModal="connectLinkedinModal",e.unlockWithBitsModal="unlockWithBitsModal",e.followsModal="followsModal",e.oldUsersGamificationModal="oldUsersGamificationModal"}(F||(F={})),function(e){e.destroyApiCall="destroyApiCall",e.getProfile="getProfile",e.getAllBadges="getAllBadges",e.getFollowers="getFollowers",e.getFollowing="getFollowing",e.getWelcomeBackExperimentData="getWelcomeBackExperimentData",e.updateProfileInfo="updateProfileInfo",e.uploadAvatar="uploadAvatar",e.updatePassword="updatePassword",e.resetCourseProgress="resetCourseProgress",e.deleteCourseProgress="deleteCourseProgress",e.getWasUserPro="getWasUserPro",e.cancelSubscription="cancelSubscription",e.deleteUserCode="deleteUserCode",e.getAnimations="getAnimations",e.updateConnectedAccount="updateConnectedAccount",e.deleteConnectedAccount="deleteConnectedAccount",e.connectedAccount="connectedAccount",e.getUserData="getUserData",e.getFreeClickExperiment="getFreeClickExperiment",e.getldUsersGamification="getldUsersGamification",e.openCoursesProgressModal="openCoursesProgressModal",e.openEditProfileModal="openEditProfileModal",e.openResetCourseModal="openResetCourseModal",e.openDeleteCourseModal="openDeleteCourseModal",e.openCodesModal="openCodesModal",e.openDeleteCodeModal="openDeleteCodeModal",e.openBadgesModal="openBadgesModal",e.openFollowsModal="openFollowsModal",e.openCertificateModal="openCertificateModal",e.confirmCancellation="confirmCancellation",e.openConnectLinkedinModal="openConnectLinkedinModal",e.openOldUsersGamificationModal="openOldUsersGamificationModal",e.followProfile="followProfile",e.unfollowProfile="unfollowProfile",e.followProfileToggle="followProfileToggle",e.openBadge="openBadge",e.openCodeCoach="openCodeCoach",e.goCodeCoach="goCodeCoach",e.goEndOfModule="goEndOfModule",e.showFlashMessage="showFlashMessage",e.addConnectedAccount="addConnectedAccount",e.unlockItemWithBits="unlockItemWithBits",e.navigateToPro="navigateToPro",e.notAllowedOnMobile="notAllowedOnMobile",e.getInitialBits="getInitialBits",e.getExperiments="getExperiments",e.redirectToLogin="redirectToLogin",e.openModalOrRedirectToLogin="openModalOrRedirectToLogin"}(R||(R={})),function(e){e.primary="primary",e.secondary="secondary"}(H||(H={})),function(e){e[e.platiniumMod=0]="platiniumMod",e[e.goldMod=1]="goldMod",e[e.mod=2]="mod",e[e.pro=3]="pro",e[e.platinium=4]="platinium",e[e.gold=5]="gold",e[e.silver=6]="silver",e[e.bronze=7]="bronze",e[e.basic=8]="basic"}(q||(q={})),function(e){e.gamificationOldUserInitialBitPopupShown="gamification_old_user_initial_bit_popup_shown"}(W||(W={}));var X=Object(O.i)()(G=function(){function e(){Y(this,e),J(this,"modalService",O.b.take("global",O.h))}return z(e,[{key:"open",value:function(e){this.modalService.open(e)}},{key:"close",value:function(e){this.modalService.close(e)}},{key:"openCoursesProgressModal",value:function(){this.open(F.coursesProgressModal)}},{key:"openEditProfileModal",value:function(){this.open(F.editProfileModal)}},{key:"openResetCourseModal",value:function(){this.open(F.resetCourseModal)}},{key:"openDeleteCourseModal",value:function(){this.open(F.deleteCourseModal)}},{key:"openCodesModal",value:function(){this.open(F.codesModal)}},{key:"openDeleteCodeModal",value:function(){this.open(F.deleteCodeModal)}},{key:"openBadgesModal",value:function(){this.open(F.badgesModal)}},{key:"openFollowsModal",value:function(){this.open(F.followsModal)}},{key:"openUnlockCCWithBitsModal",value:function(){this.open(F.unlockWithBitsModal)}},{key:"openCertificateModal",value:function(){this.open(F.certificateModal)}},{key:"openCancelSubscriptionModal",value:function(){this.open(F.cancelSubscription)}},{key:"openConnectLinkedinModal",value:function(){this.open(F.connectLinkedinModal)}},{key:"openOldUsersGamificationModal",value:function(){this.open(F.oldUsersGamificationModal)}}]),e}())||G,K=A((function(e){e.exports=function(e){if(Array.isArray(e))return U(e)},e.exports.__esModule=!0,e.exports.default=e.exports}));M(K);var $=A((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}));M($);var Q=A((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}));M(Q);var Z,ee=M(A((function(e){e.exports=function(e){return K(e)||$(e)||L(e)||Q()},e.exports.__esModule=!0,e.exports.default=e.exports})));function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ae,ne,oe,re,le,ce,ie=Object(O.i)()(Z=z((function e(){var t=this;Y(this,e),J(this,"trackAction",new r.a(null)),J(this,"tagManager",new r.a(null)),J(this,"authService",O.b.take("global",O.a)),J(this,"trackActionStream",this.trackAction.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){slTrack({action:e.action,element:e.element,entityId:e.entityId||null,redirectUrl:e.redirectUrl||null})})))),J(this,"tagManagerStream",this.tagManager.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){dataLayer.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({userId:t.authService.getUser().id},e))}))))})))||Z,se=Object(O.i)()(ae=z((function e(){Y(this,e),J(this,"userDetailsStream",new r.a(null)),J(this,"followingDisableStream",new r.a(!1)),J(this,"followsTypeStream",new r.a(null)),J(this,"followersStream",new r.a(null)),J(this,"followingStream",new r.a(null)),J(this,"coursesProgressStream",new r.a(null)),J(this,"certificatesStream",new r.a(null)),J(this,"wasUserProStream",new r.a(null)),J(this,"codeCoachesStream",new r.a(null)),J(this,"allOpenedCodeCoachesStream",new r.a(null)),J(this,"profileRecentBadgesStream",new r.a(null)),J(this,"profileNextTaskStream",new r.a(null)),J(this,"allBadgesStream",new r.a(null)),J(this,"recentBadgesStream",new r.a(null)),J(this,"nextTasksStream",new r.a(null)),J(this,"selectedBadgeIdStream",new r.a(null)),J(this,"shopItemsStream",new r.a(null)),J(this,"userCodesStream",new r.a(null)),J(this,"proBannerStream",new r.a(null)),J(this,"proManagementStream",new r.a(null)),J(this,"profileInfoStream",new r.a(null)),J(this,"selectedCourseProgressStream",new r.a(null)),J(this,"selectedCertificateStream",new r.a(null)),J(this,"selectedUserCodeStream",new r.a(null)),J(this,"formMessageStream",new r.a(null)),J(this,"profileState",new r.a(null)),J(this,"animationsStream",new r.a(null)),J(this,"countriesStream",new r.a(null)),J(this,"flashMessageStream",new r.a(null)),J(this,"unlockWithBitsModalStream",new r.a(null)),J(this,"deviceInfoStream",new r.a(null)),J(this,"welcomeBackExperimentDataStream",new r.a(null)),J(this,"freeClickExperimentDataStream",new r.a(null)),J(this,"userDataStream",new r.a(null)),J(this,"dailyDoseFreeCCStream",new r.a(null)),J(this,"oldUsersGamificationStream",new r.a(null))})))||ae,ue=Object(O.i)()(ne=function(){function e(){Y(this,e),J(this,"coursesProgressItemLoadingStream",new r.a([])),J(this,"codeItemLoadingStream",new r.a([])),J(this,"formLoadingStream",new r.a(null)),J(this,"cancelSubscriptionLoadingStream",new r.a(!1)),J(this,"linkedinConnectLoadingStream",new r.a(!1)),J(this,"disconnectAccountLoadingStream",new r.a(null))}return z(e,[{key:"setCourseProgressItemLoadingState",value:function(e){var t=ee(this.coursesProgressItemLoadingStream.value);t.push(e),this.coursesProgressItemLoadingStream.next(t)}},{key:"removeCourseProgressItemLoadingState",value:function(e){var t=this.coursesProgressItemLoadingStream.value.filter((function(t){return t!==e}));this.coursesProgressItemLoadingStream.next(t)}},{key:"setCodeItemLoadingState",value:function(e){var t=ee(this.codeItemLoadingStream.value);t.push(e),this.codeItemLoadingStream.next(t)}},{key:"removeCodeItemLoadingState",value:function(e){var t=this.codeItemLoadingStream.value.filter((function(t){return t!==e}));this.codeItemLoadingStream.next(t)}},{key:"updateFormLoadingState",value:function(e){this.formLoadingStream.next(e)}}]),e}())||ne,de="mf_slProfile_container_context",pe=[j.pb.userDetails,j.pb.coursesProgress,j.pb.certificates,j.pb.codeCoaches,j.pb.userBadges,j.pb.userCodes],me=(J(oe={},q.platiniumMod,{badgeType:"primary",badgeBackground:"#F19C7E",badgeLabel:"PLAT",badgeIconId:"simpleStar",theme:"light"}),J(oe,q.goldMod,{badgeType:"primary",badgeBackground:"#FFCC49",badgeLabel:"GOLD",badgeIconId:"simpleStar",theme:"light"}),J(oe,q.mod,{badgeType:"primary",badgeBackground:"#CBE0E7",badgeLabel:"MOD",badgeIconId:"simpleStar",theme:"light"}),J(oe,q.pro,{badgeType:"primary",badgeBackground:"#DBC156",badgeLabel:"PRO",theme:"dark"}),J(oe,q.platinium,{badgeType:"secondary",badgeFill:"#ECF7FF",badgeBackground:"#3B6887",badgeIconId:"simpleStar",theme:"dark"}),J(oe,q.gold,{badgeType:"secondary",badgeFill:"#F6E9C8",badgeBackground:"#ECAA00",badgeIconId:"simpleStar",theme:"dark"}),J(oe,q.silver,{badgeType:"secondary",badgeFill:"#FFFFFF",badgeBackground:"#96A5B3",badgeIconId:"simpleStar",theme:"dark"}),J(oe,q.bronze,{badgeType:"secondary",badgeFill:"#F6E9C8",badgeBackground:"#988145",badgeIconId:"simpleStar",theme:"dark"}),J(oe,q.basic,{theme:"dark"}),oe),be=(J(re={},j.v.GO,{title:"Go",color:"#00ACD7"}),J(re,j.v.R,{title:"R",color:"#2066B8"}),J(re,j.v.CPP,{title:"C++",color:"#0C6291"}),J(re,j.v.C,{title:"C",color:"#2196F3"}),J(re,j.v.CSharp,{title:"C#",color:"#652F91"}),J(re,j.v.JAVA,{title:"Java",color:"#FA9722"}),J(re,j.v.PYTHON,{title:"Python",color:"#134C7A"}),J(re,j.v.PHP,{title:"PHP",color:"#6085BC"}),J(re,j.v.RUBY,{title:"Ruby",color:"#E04E3F"}),J(re,j.v.KOTLIN,{title:"Kotlin",color:"#3396D7"}),J(re,j.v.SWIFT,{title:"Swift",color:"#F25F33"}),J(re,j.v.NODEJS,{title:"Node js",color:"#8DB93E"}),J(re,j.v.WEB,{title:"Web",color:"#E54D26"}),J(re,j.v.HTML,{title:"Web",color:"#E54D26"}),J(re,j.v.CSS,{title:"Web",color:"#E54D26"}),J(re,j.v.JS,{title:"Web",color:"#E54D26"}),J(re,j.v.SQL,{title:"sql",color:"#4162AB"}),re),fe=1169;function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}!function(e){e[e.error400=400]="error400",e[e.error401=401]="error401",e[e.error403=403]="error403",e[e.error404=404]="error404",e[e.error500=500]="error500"}(ce||(ce={}));var he=O.b.take("global",O.a).userInfoStream,ye=(J(le={},ce.error400,(function(){Object(w.e)("/error",{replace:!0})})),J(le,ce.error401,(function(){O.b.take("global",O.a).logout(),he.next(null),Object(w.e)("/users/login?returnUrl=".concat(encodeURIComponent("".concat(window.location.pathname).concat(window.location.search))),{replace:!0})})),J(le,ce.error403,(function(){O.b.take("global",O.a).logout(),he.next(null),Object(w.e)("/users/login?returnUrl=".concat(encodeURIComponent("".concat(window.location.pathname).concat(window.location.search))),{replace:!0})})),J(le,ce.error404,(function(){Object(w.e)("/pagenotfound",{replace:!0})})),J(le,ce.error500,(function(){Object(w.e)("/error",{replace:!0})})),le);var _e,Oe=function(e){return Object.keys(j.Q).find((function(t){return j.Q[t]===e}))};function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ee,je=Object(O.i)()(_e=function(){function e(){var t=this;Y(this,e),J(this,"api",void 0),J(this,"paymentApi",void 0),J(this,"achievementApi",void 0),J(this,"experimentApi",void 0),J(this,"learnApi",void 0),J(this,"codeCoachApi",void 0),J(this,"codeApi",void 0),J(this,"lookupApi",void 0),J(this,"animationLoaderApi",void 0),J(this,"gamificationApi",void 0),J(this,"userSettingsApi",void 0),J(this,"dataService",O.b.take(de,se)),J(this,"globalDataService",O.b.take("global",O.c)),J(this,"loadingService",O.b.take(de,ue)),J(this,"authService",O.b.take("global",O.a)),J(this,"storageService",O.b.take("global",O.j)),J(this,"modalService",O.b.take("global",O.h)),J(this,"trackAction",O.b.take(de,ie).trackAction),J(this,"unsubscriber",new l.a),J(this,"onCancelSubscription",(function(){t.loadingService.cancelSubscriptionLoadingStream.next(!1),t.modalService.open(F.succeedCancelSubscription),t.modalService.close(F.cancelSubscription);var e=we(we({},t.dataService.proManagementStream.value),{},{subscription:we(we({},t.dataService.proManagementStream.value.subscription),{},{web:we(we({},t.dataService.proManagementStream.value.subscription.web),{},{isActive:!1})})});t.dataService.proManagementStream.next(e)})),J(this,"updateCourseProgress",(function(e){var a=t.dataService.coursesProgressStream.value.map((function(t){return t.courseId===e?(t.progress=0,we({},t)):t}));t.dataService.coursesProgressStream.next(a)})),J(this,"removeCourseProgress",(function(e){var a=t.dataService.coursesProgressStream.value.filter((function(t){return t.courseId!==e}));0===a.length&&t.modalService.close(F.deleteCourseModal),t.dataService.coursesProgressStream.next(a)})),J(this,"removeUserCodeItem",(function(e){var a=t.dataService.userCodesStream.value.filter((function(t){return t.id!==e}));0===a.length&&t.modalService.close(F.deleteCodeModal),t.dataService.userCodesStream.next(a)})),this.api=O.b.take("global",j.db),this.paymentApi=O.b.take(de,j.bb),this.experimentApi=new j.H({environmentUrl:O.b.take(de,"experimentApiHost")}),this.codeApi=O.b.take("global",j.o),this.achievementApi=O.b.take("global",j.b),this.learnApi=new j.R({environmentUrl:O.b.take(de,"learnApiHost")}),this.codeCoachApi=O.b.take("global",j.p),this.lookupApi=O.b.take("global",j.V),this.animationLoaderApi=O.b.take("global",j.d),this.gamificationApi=O.b.take("global",j.J),this.userSettingsApi=O.b.take("global",j.qb)}return z(e,[{key:"getProfile",value:function(e){var t=this;return this.api.getProfile(Number(e),pe).pipe(Object(p.a)((function(a){t.trackAction.next({action:"view",element:"profile",entityId:Number(e)}),t.dataService.profileState.next(t.checkProfileEmptiness(a)?"empty":"loaded"),t.defineProfileInfo(a.userDetails),t.streamProfileSections(a)})),Object(m.a)((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.length){var a=ge(ge({},ye),t);"function"==typeof a[e[0].code]&&a[e[0].code]()}else Object(w.e)("/error",{replace:!0})}(e,J({},ce.error404,(function(){t.dataService.profileState.next("notFound")}))),Object(c.a)(null)})))}},{key:"getFollowers",value:function(e,t){var a=this;return this.api.getFollowers(e,t).pipe(Object(b.a)(this.unsubscriber),Object(p.a)((function(t){var n;a.dataService.followersStream.next((null===(n=a.authService.getUser())||void 0===n?void 0:n.id)===e?t.data:a.sortFollowsList(t.data))})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"getFollowing",value:function(e,t){var a=this;return this.api.getFollowing(e,t).pipe(Object(b.a)(this.unsubscriber),Object(p.a)((function(t){var n;a.dataService.followingStream.next((null===(n=a.authService.getUser())||void 0===n?void 0:n.id)===e?t.data:a.sortFollowsList(t.data))})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"destroyApiCall",value:function(){this.unsubscriber.next(),this.unsubscriber.complete()}},{key:"sortFollowsList",value:function(e){var t,a=null===(t=this.authService.getUser())||void 0===t?void 0:t.id,n=e.find((function(e){return e.userId===a}));return n?[n].concat(ee(e.filter((function(e){return e.userId!==a})))):e}},{key:"getUserData",value:function(){var e=this;return this.api.getUserData().pipe(Object(p.a)((function(t){e.dataService.userDataStream.next(t)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"getUserSettings",value:function(){return this.userSettingsApi.getUserSettings()}},{key:"updateUserSettings",value:function(e){return this.userSettingsApi.updateUserSettings(e)}},{key:"getWelcomeBackExperimentData",value:function(e){var t=this;return this.experimentApi.getWelcomeBackExperimentData(e).pipe(Object(f.a)((function(e){var a;return t.dataService.welcomeBackExperimentDataStream.next(e.data),"welcomeBack_default_web"===(null===(a=e.data)||void 0===a?void 0:a.flowName)?t.getUserData():Object(c.a)(null)}))).subscribe(),Object(c.a)(null)}},{key:"getFreeClickExperiment",value:function(){var e=this;return this.experimentApi.getFreeClickExperimentData().pipe(Object(p.a)((function(t){e.dataService.freeClickExperimentDataStream.next(t.data)}))).subscribe(),Object(c.a)(null)}},{key:"getOldUsersGamificationExperiment",value:function(e){return this.experimentApi.getOldUsersGamificationExperimentData(e)}},{key:"getBadges",value:function(e){var t=this;return this.achievementApi.getBadges(e).pipe(Object(v.a)({refCount:!0}),Object(p.a)((function(e){var a,n,o;t.dataService.allBadgesStream.next(null===(a=e.data)||void 0===a?void 0:a.all),t.dataService.recentBadgesStream.next(null===(n=e.data)||void 0===n?void 0:n.recent),t.dataService.nextTasksStream.next(null===(o=e.data)||void 0===o?void 0:o.next)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"getProfileShopItems",value:function(){var e=this;return this.gamificationApi.getShopItems(j.D.profile,0,[j.gb.codeCoach]).pipe(Object(p.a)((function(t){e.dataService.shopItemsStream.next(t.data||{})})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"unlockItemWithBits",value:function(e,t){var a=this;return this.dataService.profileState.next("loading"),this.gamificationApi.buyShopItem({itemType:e,itemId:t}).pipe(Object(p.a)((function(n){var o,r="";switch(e){case j.gb.codeCoach:r="codeCoaches";break;default:r=""}a.dataService.shopItemsStream.next(we(we({},a.dataService.shopItemsStream.value),{},J({},r,null===(o=a.dataService.shopItemsStream.value)||void 0===o?void 0:o[r].map((function(e){return e.itemId===t?we(we({},e),{},{isBought:!0}):e}))))),a.globalDataService.bitsStream.next({previousValue:null,currentValue:n.data.bits}),a.modalService.closeAll(),a.dataService.profileState.next("loaded"),e===j.gb.codeCoach&&a.navigateToCodeCoach(t)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"getAllOpenedCodeCoaches",value:function(){var e=this;return this.codeCoachApi.getAllOpenedCodeCoaches().pipe(Object(p.a)((function(t){e.dataService.allOpenedCodeCoachesStream.next(t.data)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"followProfile",value:function(e){return this.api.follow(Number(e))}},{key:"unfollowProfile",value:function(e){return this.api.unfollow(Number(e))}},{key:"proManagement",value:function(){var e,t=this;return null!==(e=this.authService.getUser())&&void 0!==e&&e.isPro?this.getSubscriptionInfo().pipe(Object(p.a)((function(e){t.defineProManagement("subscription",e.data)})),Object(m.a)((function(){return Object(c.a)(null)}))):this.getPaymentPlans().pipe(Object(p.a)((function(e){t.defineProManagement("plans",e.data)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"getCountries",value:function(){var e=this;return this.lookupApi.getCountries().pipe(Object(p.a)((function(t){e.dataService.countriesStream.next(t.data)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"updateInfo",value:function(e,t){var a=this;return this.dataService.formMessageStream.next(null),this.loadingService.formLoadingStream.next("info"),this.api.updateInfo(Number(e),t).pipe(Object(p.a)((function(e){a.storageService.save("user",we(we({},a.authService.userInfoStream.value),e.data),"local"),a.authService.userInfoStream.next(we(we({},a.authService.userInfoStream.value),e.data)),a.updateUserDetails(e.data),a.dataService.formMessageStream.next({type:"success",messages:["Information saved successfully"]}),a.loadingService.formLoadingStream.next(null)})),Object(m.a)((function(){return a.dataService.formMessageStream.next({type:"fail",messages:["Something went wrong."]}),a.loadingService.formLoadingStream.next(null),Object(c.a)(null)})))}},{key:"uploadAvatar",value:function(e){var t=this;return this.loadingService.formLoadingStream.next("info"),this.api.uploadAvatar(e).pipe(Object(p.a)((function(e){t.updateUserDetails(e.data),t.authService.isLoggedIn()&&(t.storageService.save("user",we(we({},t.authService.getUser()),{},{avatarUrl:e.data.avatarUrl}),"local"),t.authService.userInfoStream.next(we(we({},t.authService.getUser()),{},{avatarUrl:e.data.avatarUrl}))),t.loadingService.formLoadingStream.next(null)})),Object(m.a)((function(){return t.loadingService.formLoadingStream.next(null),Object(c.a)(null)})))}},{key:"updatePassword",value:function(e){var t=this;return this.dataService.formMessageStream.next(null),this.loadingService.formLoadingStream.next("password"),this.api.changePassword({oldPassword:e.current,newPassword:e.new}).pipe(Object(p.a)((function(){t.dataService.formMessageStream.next({type:"success",messages:["Password updated successfully"]}),t.loadingService.formLoadingStream.next(null)})),Object(m.a)((function(){return t.dataService.formMessageStream.next({type:"fail",messages:["Something went wrong, make sure if the information is correct"]}),t.loadingService.formLoadingStream.next(null),Object(c.a)(null)})))}},{key:"resetCourseProgress",value:function(e){var t=this;return this.loadingService.setCourseProgressItemLoadingState(e),this.learnApi.resetProgress(e).pipe(Object(p.a)((function(){t.updateCourseProgress(e),t.loadingService.removeCourseProgressItemLoadingState(e),t.dataService.selectedCourseProgressStream.next(null)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"deleteCourse",value:function(e){var t=this;return this.loadingService.setCourseProgressItemLoadingState(e),this.learnApi.hideCourse(e).pipe(Object(p.a)((function(){t.removeCourseProgress(e),t.loadingService.removeCourseProgressItemLoadingState(e),t.dataService.selectedCourseProgressStream.next(null)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"deleteUserCode",value:function(e){var t=this;return this.loadingService.setCodeItemLoadingState(e),this.codeApi.deleteUserCode(e).pipe(Object(p.a)((function(){t.removeUserCodeItem(e),t.loadingService.removeCodeItemLoadingState(e),t.dataService.selectedUserCodeStream.next(null)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"cancelSubscription",value:function(){return this.loadingService.cancelSubscriptionLoadingStream.next(!0),this.paymentApi.cancelSubscription().pipe(Object(p.a)(this.onCancelSubscription),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"wasUSerPro",value:function(){var e=this;return this.paymentApi.getWasUserPro().pipe(Object(p.a)((function(t){e.dataService.wasUserProStream.next(null==t?void 0:t.data)})),Object(m.a)((function(){return Object(c.a)(null)})))}},{key:"getPaymentPlans",value:function(){return this.paymentApi.getPaymentPlans()}},{key:"getSubscriptionInfo",value:function(){return this.paymentApi.getPaymentStatus()}},{key:"streamProfileSections",value:function(e){var t,a;this.dataService.userDetailsStream.next(this.filterUserConnectedAccounts(e.userDetails)),this.dataService.coursesProgressStream.next(e.coursesProgress),this.dataService.certificatesStream.next(e.certificates),this.dataService.codeCoachesStream.next(this.sliceCodeCoaches(e.codeCoaches)),this.dataService.profileRecentBadgesStream.next(null===(t=e.userBadges)||void 0===t?void 0:t.badges),this.dataService.profileNextTaskStream.next(null===(a=e.userBadges)||void 0===a?void 0:a.nextChallange),this.dataService.userCodesStream.next(e.userCodes),this.defineProBanner(e.userDetails)}},{key:"defineProBanner",value:function(e){if(this.authService.isLoggedIn()){var t=this.authService.getUser(),a={showBanner:!t.isPro&&(t.id===e.id||e.isPro),isOwnProBanner:t.id===e.id};this.dataService.proBannerStream.next(a)}else this.dataService.proBannerStream.next(null)}},{key:"defineProfileInfo",value:function(e){var t=this.authService.getUser(),a=q.basic,n=(null==t?void 0:t.id)===e.id;if(e.badges&&e.badges.length){var o=e.badges.sort((function(e,t){return e.priority-t.priority}))[0];a=this.defineProfileType(o)}this.dataService.profileInfoStream.next(we({isOwnProfile:n,type:a},me[a]))}},{key:"defineProfileType",value:function(e){var t;return(t={},J(t,j.lb.platinumMod,q.platiniumMod),J(t,j.lb.goldMod,q.goldMod),J(t,j.lb.mod,q.mod),J(t,j.lb.pro,q.pro),J(t,j.lb.platinum,q.platinium),J(t,j.lb.gold,q.gold),J(t,j.lb.bronze,q.bronze),J(t,j.lb.silver,q.silver),J(t,"basic",q.basic),t)[(null==e?void 0:e.name)||"basic"]}},{key:"checkProfileEmptiness",value:function(e){var t,a,n,o,r=this.authService.getUser();return!((null==r?void 0:r.id)===e.userDetails.id||null!==(t=e.coursesProgress)&&void 0!==t&&t.length||null!==(a=e.certificates)&&void 0!==a&&a.length||null!=e&&null!==(n=e.codeCoaches)&&void 0!==n&&n.length||null!==(o=e.userCodes)&&void 0!==o&&o.length)}},{key:"defineProManagement",value:function(e,t){this.dataService.proManagementStream.next({isPro:"plans"!==e,plans:"plans"===e?t:null,subscription:"plans"!==e?this.getActiveSubscriptions(t):null})}},{key:"getActiveSubscriptions",value:function(e){return["web","appStore","playStore"].reduce((function(t,a){if(!e[a])return we(we({},t),{},J({},a,null));if(e[a].isActive)return we(we({},t),{},J({},a,e[a]));var n,o="web"===a?e[a].paidThroughDate:e[a].endDate,r=(n=o,(new Date).getTime()>new Date(n).getTime()?null:e[a]);return we(we({},t),{},J({},a,r))}),{})}},{key:"updateUserDetails",value:function(e){this.dataService.userDetailsStream.next(we(we({},this.dataService.userDetailsStream.value),e))}},{key:"filterUserConnectedAccounts",value:function(e){var t,a=(J(t={},j.mb.GitHub,j.mb.GitHub),J(t,j.mb.LinkedIn,j.mb.LinkedIn),J(t,j.mb.StackOverflow,j.mb.StackOverflow),t);return we(we({},e),{},{displayConnectedAccounts:null==e?void 0:e.connectedAccounts.filter((function(e){return a[e.service]}))})}},{key:"sliceCodeCoaches",value:function(e){return e?e.length<10?e:e.slice(0,10):[]}},{key:"getAnimation",value:function(e){var t=this;return e&&e.length?Object(i.a)(e.map((function(e){return t.animationLoaderApi.getAnimation(e)}))).pipe(Object(p.a)((function(e){t.dataService.animationsStream.next(e)}))):(this.dataService.animationsStream.next(null),Object(c.a)(null))}},{key:"updateConnectedAccount",value:function(e,t){var a=this;return this.updateAccountVisibility(e,t.isVisible),this.api.updateConnectedAccount(e,t).pipe(Object(m.a)((function(){return a.updateAccountVisibility(e,!t.isVisible),a.showConnectAccountError(),Object(c.a)(null)})))}},{key:"deleteConnectedAccount",value:function(e){var t=this;return this.loadingService.disconnectAccountLoadingStream.next(we(we({},this.loadingService.disconnectAccountLoadingStream.value),{},J({},e,!0))),this.api.deleteConnectedAccount(e).pipe(Object(p.a)((function(){t.dataService.userDetailsStream.next(we(we({},t.dataService.userDetailsStream.value),{},{displayConnectedAccounts:t.dataService.userDetailsStream.value.displayConnectedAccounts.filter((function(t){return t.connectionId!==e}))}))})),Object(m.a)((function(){return t.showConnectAccountError(),Object(c.a)(null)})),Object(g.a)((function(){t.loadingService.disconnectAccountLoadingStream.next(we(we({},t.loadingService.disconnectAccountLoadingStream.value),{},J({},e,!1)))})))}},{key:"connectedAccount",value:function(e){var t=this;return this.loadingService.linkedinConnectLoadingStream.next(!0),this.api.connectAccount(e).pipe(Object(p.a)((function(e){t.dataService.userDetailsStream.next(we(we({},t.dataService.userDetailsStream.value),{},{displayConnectedAccounts:[].concat(ee(t.dataService.userDetailsStream.value.displayConnectedAccounts),[e.data])})),t.modalService.close(F.connectLinkedinModal)})),Object(m.a)((function(){return t.showConnectAccountError(),Object(c.a)(null)})),Object(g.a)((function(){t.loadingService.linkedinConnectLoadingStream.next(!1)})))}},{key:"showConnectAccountError",value:function(){this.dataService.flashMessageStream.next({type:E.l.ERROR,message:"Something went wrong, please try again later"})}},{key:"updateAccountVisibility",value:function(e,t){var a=this.dataService.userDetailsStream.value,n=a.displayConnectedAccounts.map((function(a){var n=we({},a);return n.connectionId===e?(n.isVisible=t,n):n}));this.dataService.userDetailsStream.next(we(we({},a),{},{displayConnectedAccounts:n}))}},{key:"navigateToCodeCoach",value:function(e){var t,a=null===(t=this.dataService.codeCoachesStream.value.find((function(t){return t.id===e})))||void 0===t?void 0:t.languages[0],n=Oe(a),o="/codecoach/".concat(e,"?language=").concat(n,"&location=").concat(j.q.lesson,"&source=profile");Object(w.e)(o,{replace:!1})}},{key:"getInitialBits",value:function(){return this.gamificationApi.getOldUsersInitialBits()}},{key:"getExperimentsData",value:function(e,t){return this.experimentApi.getExperimentsData(e,t)}}]),e}())||_e;function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xe,Pe,Ie=Object(O.i)()(Ee=function(){function e(){var t=this;Y(this,e),J(this,"api",O.b.take(de,je)),J(this,"dataService",O.b.take(de,se)),J(this,"modalsService",O.b.take(de,X)),J(this,"authService",O.b.take("global",O.a)),J(this,"trackAction",O.b.take(de,ie).trackAction),J(this,"navigateToProHandler",(function(e,a,n){var o=encodeURI("".concat(window.location.pathname).concat(a||"")),r="/payments/pro?source=".concat(e,"&returnUrl=").concat(o);n?t.trackAction.next(Ce(Ce({},n),{},{redirectUrl:r})):window.location.href=r})),J(this,"notAllowedOnMobileHandler",(function(e,a){t.dataService.deviceInfoStream.next(e),a&&t.trackAction.next({action:"view",element:"cc_unavailability",entityId:a})})),J(this,"dailyDoseResponseHandler",(function(e){var a,n;t.dataService.dailyDoseFreeCCStream.value||t.dataService.dailyDoseFreeCCStream.next({courseId:null==e||null===(a=e.freeCC[0])||void 0===a?void 0:a.courseId,list:null==e||null===(n=e.freeCC[0])||void 0===n?void 0:n.list})})),J(this,"getOldUsersGamificationHandler",(function(e){var a;return(null===(a=t.authService.getUser())||void 0===a?void 0:a.id)===e?Object(i.a)([t.api.getOldUsersGamificationExperiment(e),t.api.getUserSettings()]).pipe(Object(p.a)((function(e){var a,n,o,r=V(e,2),l=r[0],c=r[1],i=l.data.pages[0].data,s="true"===(null==c||null===(a=c.data)||void 0===a||null===(n=a.userSettings)||void 0===n||null===(o=n.find((function(e){return e.key===W.gamificationOldUserInitialBitPopupShown})))||void 0===o?void 0:o.value);i&&!s&&(t.dataService.oldUsersGamificationStream.next(i),t.modalsService.openOldUsersGamificationModal())})),Object(m.a)((function(){return Object(c.a)(null)}))):Object(c.a)(null)})),J(this,"getInitialBitsHandler",(function(){return t.api.getInitialBits().pipe(Object(p.a)((function(e){e.data&&t.api.updateUserSettings([{key:W.gamificationOldUserInitialBitPopupShown,value:"true"}]).subscribe()})),Object(m.a)((function(){return Object(c.a)(null)})))})),J(this,"updateFollowingInfo",(function(e){var a=t.dataService.userDetailsStream,n=a.value,o=e?n.followers+1:n.followers-1;a.next(Ce(Ce({},n),{},{isFollowing:e,followers:o}))})),J(this,"openModalOrRedirectToLogin",(function(e,a){t.authService.isLoggedIn()?e[a]&&(t.modalsService.openFollowsModal(),t.dataService.followsTypeStream.next(a)):t.redirectToLogin()})),J(this,"followProfileToggleHandler",(function(e){t.updateFollowingInfo(e===R.followProfile);var a=t.dataService.userDetailsStream;return e===R.followProfile?t.api.followProfile(a.value.id.toString()):t.api.unfollowProfile(a.value.id.toString())})),J(this,"getExperimentsDataHandler",(function(){var e,a=[];return t.dataService.dailyDoseFreeCCStream.value?Object(c.a)(null):(a.push("daily_dose"),t.api.getExperimentsData(null===(e=t.dataService.userDetailsStream.value)||void 0===e?void 0:e.id,a).pipe(Object(m.a)((function(){return Object(c.a)(null)})),Object(p.a)((function(e){if(e){var a,n,o=null==e||null===(a=e.data)||void 0===a||null===(n=a.find((function(e){return"daily_dose"===e.experimentName})))||void 0===n?void 0:n.pages[0].data;t.dailyDoseResponseHandler(o)}}))))}))}return z(e,[{key:"openCodeCoachHandler",value:function(e){var t={replace:!1};switch(e.state){case j.s.userIsPro:case j.s.isOpen:case j.s.unlocked:var a=Oe(e.languages[0]),n="/codecoach/".concat(e.id,"?language=").concat(a,"&location=").concat(j.q.lesson,"&source=profile");this.trackAction.next({action:"click",element:"cc_profile_available",entityId:e.id}),Object(w.e)(n,t);break;case j.s.unlock:var o;this.dataService.unlockWithBitsModalStream.next({itemType:j.gb.codeCoach,id:e.id,price:null===(o=e.shopItem)||void 0===o?void 0:o.price}),this.trackAction.next({action:"click",element:"cc_profile_unlock",entityId:e.id}),Object(w.e)("".concat(location.pathname,"?modal=unlock&ccid=").concat(e.id)),this.modalsService.open(F.unlockWithBitsModal);break;case j.s.pro:this.trackAction.next({action:"click",element:"cc_profile_pro",entityId:e.id}),Object(w.e)("/payments/pro?source=profilecc&returnUrl=/profile",t)}}},{key:"goCodeCoachHandler",value:function(e,t){var a=t===j.v.JS?j.v.NODEJS:t;Object(w.e)("/codecoach/".concat(e,"?language=").concat(a,"&location=").concat(j.q.lesson,"&source=profile"),{replace:!1})}},{key:"redirectToLogin",value:function(){Object(w.e)("/users/login?returnUrl=".concat(encodeURIComponent(window.location.pathname)))}},{key:"updateConnectedAccountHandler",value:function(e){return this.api.updateConnectedAccount(e.connectionId,{isVisible:e.isVisible})}},{key:"deleteConnectedAccountHandler",value:function(e){return this.api.deleteConnectedAccount(e)}},{key:"connectAccountHandler",value:function(e){return this.api.connectedAccount(e)}},{key:"addConnectedAccountHandler",value:function(e){return this.dataService.userDetailsStream.next(Ce(Ce({},this.dataService.userDetailsStream.value),{},{displayConnectedAccounts:[].concat(ee(this.dataService.userDetailsStream.value.displayConnectedAccounts),[e])})),Object(c.a)(null)}},{key:"showFlashMessageHandler",value:function(e){return this.dataService.flashMessageStream.next(e),Object(c.a)(null)}}]),e}())||Ee,Ne=Object(O.i)()(xe=z((function e(){var t=this;Y(this,e),J(this,"actions",new r.a(null)),J(this,"modals",O.b.take(de,X)),J(this,"apiService",O.b.take(de,je)),J(this,"actionHandlers",O.b.take(de,Ie)),J(this,"dataService",O.b.take(de,se)),J(this,"cancelable",this.actions.pipe(Object(d.a)((function(e){return e&&"cancelable"===e.requestType})),Object(f.a)((function(e){var a,n,o,r,l,i,u,d,p,m,b,f,v;switch(e.type){case R.getProfile:return Object(s.a)(t.apiService.getProfile(null===(a=e.data)||void 0===a?void 0:a.profileId),t.apiService.getCountries(),t.apiService.getProfileShopItems(),t.apiService.getAllOpenedCodeCoaches());case R.getFollowers:return t.apiService.getFollowers(null===(n=e.data)||void 0===n?void 0:n.userId,null===(o=e.data)||void 0===o?void 0:o.pagination);case R.getFollowing:return t.apiService.getFollowing(null===(r=e.data)||void 0===r?void 0:r.userId,null===(l=e.data)||void 0===l?void 0:l.pagination);case R.updateProfileInfo:return t.apiService.updateInfo(null===(i=e.data)||void 0===i?void 0:i.profileId,null===(u=e.data)||void 0===u?void 0:u.updateInfo);case R.updatePassword:return t.apiService.updatePassword(null===(d=e.data)||void 0===d?void 0:d.passwords);case R.cancelSubscription:return t.apiService.cancelSubscription();case R.unlockItemWithBits:return t.apiService.unlockItemWithBits(null===(p=e.data)||void 0===p?void 0:p.itemType,null===(m=e.data)||void 0===m?void 0:m.itemId);case R.navigateToPro:return t.actionHandlers.navigateToProHandler(null===(b=e.data)||void 0===b?void 0:b.toProSource,null===(f=e.data)||void 0===f?void 0:f.query,null===(v=e.data)||void 0===v?void 0:v.trackingData),Object(c.a)(null);case R.notAllowedOnMobile:return t.actionHandlers.notAllowedOnMobileHandler(e.data.deviceInfo,e.data.codeCoachId),Object(c.a)(null);case R.destroyApiCall:return t.apiService.destroyApiCall(),Object(c.a)(null);default:return Object(c.a)(e)}})))),J(this,"parallel",this.actions.pipe(Object(d.a)((function(e){return e&&"parallel"===e.requestType})),Object(h.a)((function(e){var a,n,o,r,l,i,s,u,d;switch(e.type){case R.openEditProfileModal:return t.modals.openEditProfileModal(),t.apiService.proManagement();case R.getWelcomeBackExperimentData:return t.apiService.getWelcomeBackExperimentData(null===(a=e.data)||void 0===a?void 0:a.userId);case R.getFreeClickExperiment:return t.apiService.getFreeClickExperiment();case R.getWasUserPro:return t.apiService.wasUSerPro();case R.getldUsersGamification:return t.actionHandlers.getOldUsersGamificationHandler(null===(n=e.data)||void 0===n?void 0:n.userId);case R.openCoursesProgressModal:return Object(c.a)(t.modals.openCoursesProgressModal());case R.openConnectLinkedinModal:return Object(c.a)(t.modals.openConnectLinkedinModal());case R.openResetCourseModal:return t.dataService.selectedCourseProgressStream.next(e.data.selectedCourseProgress),Object(c.a)(t.modals.openResetCourseModal());case R.openDeleteCourseModal:return t.dataService.selectedCourseProgressStream.next(e.data.selectedCourseProgress),Object(c.a)(t.modals.openDeleteCourseModal());case R.openCodesModal:return Object(c.a)(t.modals.openCodesModal());case R.openDeleteCodeModal:return t.dataService.selectedUserCodeStream.next(e.data.selectedCode),Object(c.a)(t.modals.openDeleteCodeModal());case R.openBadgesModal:return t.modals.openBadgesModal(),Object(c.a)(null);case R.openBadge:return t.modals.openBadgesModal(),t.dataService.selectedBadgeIdStream.next(e.data.badgeId),Object(c.a)(null);case R.getAllBadges:return t.apiService.getBadges(t.dataService.userDetailsStream.value.id);case R.openFollowsModal:t.modals.openFollowsModal(),t.dataService.followsTypeStream.next(null===(o=e.data)||void 0===o?void 0:o.followsType);break;case R.redirectToLogin:t.actionHandlers.redirectToLogin();break;case R.openModalOrRedirectToLogin:t.actionHandlers.openModalOrRedirectToLogin(null===(r=e.data)||void 0===r?void 0:r.updateInfo,null===(l=e.data)||void 0===l?void 0:l.followsType);break;case R.openCertificateModal:return t.dataService.selectedCertificateStream.next(null===(i=e.data)||void 0===i?void 0:i.selectedCertificate),Object(c.a)(t.modals.openCertificateModal());case R.followProfile:return t.apiService.followProfile(null===(s=e.data)||void 0===s?void 0:s.profileId);case R.followProfileToggle:return t.actionHandlers.followProfileToggleHandler(null===(u=e.data)||void 0===u?void 0:u.type);case R.unfollowProfile:return t.apiService.unfollowProfile(null===(d=e.data)||void 0===d?void 0:d.profileId);case R.resetCourseProgress:return t.apiService.resetCourseProgress(t.dataService.selectedCourseProgressStream.value.courseId);case R.deleteCourseProgress:return t.apiService.deleteCourse(t.dataService.selectedCourseProgressStream.value.courseId);case R.deleteUserCode:return t.apiService.deleteUserCode(t.dataService.selectedUserCodeStream.value.id);case R.uploadAvatar:return t.apiService.uploadAvatar(e.data.avatar);case R.confirmCancellation:return Object(c.a)(t.modals.openCancelSubscriptionModal());case R.openCodeCoach:return Object(E.lb)().isMobile?Object(c.a)(t.actions.next({type:R.notAllowedOnMobile,requestType:"cancelable",data:{codeCoachId:e.data.codeCoach.id,deviceInfo:Object(E.lb)()}})):Object(c.a)(t.actionHandlers.openCodeCoachHandler(e.data.codeCoach));case R.goCodeCoach:return Object(E.lb)().isMobile?(t.actions.next({type:R.notAllowedOnMobile,requestType:"cancelable",data:{codeCoachId:e.data.codeCoachId,deviceInfo:Object(E.lb)()}}),Object(c.a)(null)):(t.actionHandlers.goCodeCoachHandler(e.data.codeCoachId,e.data.language),Object(c.a)(null));case R.goEndOfModule:return Object(E.lb)().isMobile?(t.actions.next({type:R.notAllowedOnMobile,requestType:"cancelable",data:{codeCoach:e.data.codeCoach,deviceInfo:Object(E.lb)()}}),Object(c.a)(null)):(Object(w.e)("/learning/eom-project/".concat(e.data.courseId,"/").concat(e.data.codeCoachId),{replace:!1}),Object(c.a)(null));case R.getAnimations:return t.apiService.getAnimation(e.data.animationNames);case R.updateConnectedAccount:return t.actionHandlers.updateConnectedAccountHandler(e.data);case R.deleteConnectedAccount:return t.actionHandlers.deleteConnectedAccountHandler(e.data.connectionId);case R.showFlashMessage:return t.actionHandlers.showFlashMessageHandler(e.data);case R.connectedAccount:return t.actionHandlers.connectAccountHandler(e.data);case R.addConnectedAccount:return t.actionHandlers.addConnectedAccountHandler(e.data);case R.getInitialBits:return t.actionHandlers.getInitialBitsHandler();case R.getExperiments:return t.actionHandlers.getExperimentsDataHandler();default:return Object(c.a)(e)}return Object(c.a)(null)})))),J(this,"sequential",this.actions.pipe(Object(d.a)((function(e){return e&&"sequential"===e.requestType})),Object(y.a)((function(e){return e.type,Object(c.a)(e)})))),J(this,"actionsStream",Object(s.a)(this.cancelable,this.parallel,this.sequential).pipe(Object(d.a)((function(e){return!!e}))))})))||xe,Me=o.a.memo((function(e){var t=e.badge,a=e.dataAttribute,n=e.iconColor,r=void 0===n?"#C8D2DB":n;return o.a.createElement("div",{className:"sl-p-badge-detailed-item","data-attribute":a},o.a.createElement("img",{className:"sl-p-badge-detailed-item__icon",src:t.iconURL,alt:"badge-icon",style:{background:t.isUnlocked?r:"#C8D2DB"}}),o.a.createElement("div",{className:"sl-p-badge-detailed-item__texts"},o.a.createElement("p",{className:"sl-p-badge-detailed-item__title"},t.title),o.a.createElement("span",{className:"sl-p-badge-detailed-item__description"},t.description)))})),Ae=function(e){var t=e.allBadges,a=e.title,n=e.titleSize;return o.a.createElement("div",{className:"sl-badges ".concat(n)},o.a.createElement("h3",{className:"sl-badges__title ".concat(n)},a),o.a.createElement("div",{className:"sl-badges__container ".concat(n)},t?t.map((function(e){var t;return o.a.createElement("div",{className:"sl-badges__content",key:e.categoryId},o.a.createElement("div",{className:"sl-badges__body"},o.a.createElement("p",{className:"sl-badges__body__title"},e.categoryTitle),o.a.createElement("p",{className:"sl-badges__body__description"},e.categoryDescription),null===(t=e.badges)||void 0===t?void 0:t.map((function(e){return o.a.createElement("div",{className:"sl-badges__body__badges",key:e.id},o.a.createElement(Me,{badge:e,dataAttribute:"".concat(e.id),iconColor:e.color}))}))))})):o.a.createElement(E.M,{backgroundColor:"transparent"})))},De=function(e){var t=e.recentBadges,a=e.nextTasks,n=e.seeAllCallback;return o.a.createElement("div",{className:"sl-badges"},o.a.createElement("h3",{className:"sl-badges__title small"},"Recent"),o.a.createElement("div",{className:"sl-badges__container"},t||a?o.a.createElement("div",{className:"sl-badges__content"},o.a.createElement("div",{className:"sl-badges__body"},o.a.createElement("div",{className:"sl-badges__body__title"},"Your recent achievements"),o.a.createElement("div",{className:"sl-badges__body__description"},null!=t&&t.length?o.a.createElement("p",null,"Every step gets you closer to the goal. Dont slow down!"):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"You dont have any achievements yet."),o.a.createElement("p",null,"Follow the next task to get started!"))),null==t?void 0:t.map((function(e){return o.a.createElement("div",{className:"sl-badges__body__badges",key:e.id},o.a.createElement(Me,{badge:e,dataAttribute:"".concat(e.id),iconColor:e.color}))}))),a?o.a.createElement("div",{className:"sl-badges__body"},o.a.createElement("p",{className:"sl-badges__body__title"},"Next tasks"),o.a.createElement("p",{className:"sl-badges__body__description"},"Focus on one of the tasks below or explore a list of all to keep moving forward!"),a.map((function(e){return o.a.createElement("div",{className:"sl-badges__body__badges",key:e.id},o.a.createElement(Me,{badge:e,dataAttribute:"".concat(e.id),iconColor:e.color}))}))):null,o.a.createElement("button",{className:"sl-badges__see-all-button",onClick:n,type:"button"},"See All")):o.a.createElement(E.M,{backgroundColor:"transparent"})))};!function(e){e.recent="recent",e.all="all"}(Pe||(Pe={}));var Te=[{id:Pe.recent,title:"Recent"},{id:Pe.all,title:"All"}],Ue=function(){var e=Object(n.useState)(window.innerWidth<600),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(a?null:Pe.recent),i=V(c,2),s=i[0],p=i[1],m=Object(n.useState)(null),f=V(m,2),v=f[0],g=f[1],h=Object(n.useState)(null),y=V(h,2),w=y[0],E=y[1],j=Object(n.useState)(null),k=V(j,2),C=k[0],x=k[1],P=Object(n.useState)(null),I=V(P,2),N=I[0],M=I[1],A=O.b.take(de,se),D=A.allBadgesStream,T=A.recentBadgesStream,U=A.nextTasksStream,L=A.selectedBadgeIdStream,B=A.userDetailsStream,H=O.b.take(de,Ne).actions,q=O.b.take(de,ie).trackAction,W=O.b.take("global",O.a).userInfoStream,G=O.b.take("global",O.h).close,z=function(){var e,t;return(null===(e=B.value)||void 0===e?void 0:e.id)===(null===(t=W.value)||void 0===t?void 0:t.id)},Y=function(){q.next({action:"click",element:"see_achvments_recent",entityId:B.value.id}),p(Pe.all)};return Object(n.useEffect)((function(){var e=new l.a;return D.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(_.a)((function(e){return e.filter((function(e){return e.badges.length}))}))).subscribe(g),T.pipe(Object(b.a)(e)).subscribe(E),U.pipe(Object(b.a)(e)).subscribe(x),L.pipe(Object(b.a)(e)).subscribe(M),Object(u.a)(window,"resize").pipe(Object(b.a)(e)).subscribe((function(){r(window.innerWidth<600)})),H.next({type:R.getAllBadges,requestType:"parallel"}),function(){D.next(null),T.next(null),U.next(null),L.next(null),e.next(),e.complete()}}),[]),Object(n.useEffect)((function(){var e,t=z()?!!C:!!v;N&&t&&(null==(e=document.querySelector(".sl-badges__container [data-attribute='".concat(N,"']")))||e.setAttribute("class","sl-p-badge-detailed-item sl-p-badge-detailed-item--highlighted"),null==e||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[v,w,C,M]),Object(n.useEffect)((function(){s&&q.next({action:"view",element:s===Pe.recent?"recent_achvments":"all_achvments",entityId:B.value.id})}),[s]),z()?o.a.createElement("div",{className:"sl-p-badges-modal hide-close"},o.a.createElement("hr",{className:"sl-p-badges-modal__line"}),o.a.createElement("ul",{className:"sl-p-badges-modal__nav"},o.a.createElement("h2",{className:"sl-p-badges-modal__heading"},a&&o.a.createElement("div",{className:"sl-p-badges-modal__arrow-icon sl-p-badges-modal__arrow-icon--left",onClick:function(){a&&null!==s?p(null):G(F.badgesModal)}},o.a.createElement(S.a,{iconId:"caretDown"})),o.a.createElement("span",{className:"sl-p-badges-modal__heading--text"},a&&null!==s?Te.find((function(e){return e.id===s})).title:"Achievements")),a&&null!==s?null:Te.map((function(e){return o.a.createElement("li",{className:"sl-p-badges-modal__nav-item sl-p-badges-modal__nav-item--".concat(e.id===s?"active":"inactive"),key:e.id,onClick:function(){return p(e.id)}},e.title,a&&o.a.createElement("div",{className:"sl-p-badges-modal__arrow-icon sl-p-badges-modal__arrow-icon--right"},o.a.createElement(S.a,{iconId:"caretDown"})))}))),a&&null===s?null:s===Pe.recent?o.a.createElement(De,{recentBadges:w,nextTasks:C,seeAllCallback:Y}):o.a.createElement(Ae,{title:"All",titleSize:"small",allBadges:v})):o.a.createElement(Ae,{title:"Achievements",titleSize:"big",allBadges:v})},Le=function(e){var t=new Date(e);return"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())},Be=function(e,t){var a=Math.floor(e);return"".concat(a," ").concat(t).concat(a>1?"s":""," ago")},Fe=o.a.memo((function(e){var t=e.code,a=e.isPreview,n=e.isOwnProfile,r=e.loading,l=be[t.language],c=new Date(t.modifiedDate),i=O.b.take(de,"playgroundUrl"),s=O.b.take(de,ie).trackAction,u=O.b.take(de,Ne).actions;return o.a.createElement("div",{onClick:function(e){r&&e.preventDefault()},className:"sl-p-code-item ".concat(r?"sl-p-code-item--loading":"","  ")},o.a.createElement("a",{onClick:function(){s.next({action:"click",element:n?"code_selection_profile":"code_selection_otherprofile",entityId:t.id})},href:"".concat(i,"/").concat(t.publicId),target:"_blank",className:"sl-p-code-item__link"},o.a.createElement("div",{className:"sl-p-code-item__link__icon",style:{backgroundColor:null==l?void 0:l.color}},o.a.createElement("p",null,(null==l?void 0:l.title)||t.language)),o.a.createElement("div",{className:"sl-p-code-item__link__info"},o.a.createElement("h5",{className:"sl-p-code-item__link__name"},t.name),o.a.createElement("p",{className:"sl-p-code-item__link__date"},"Edited ",function(e){var t="string"==typeof e?new Date(e):e,a=Math.floor(((new Date).valueOf()-t.valueOf())/1e3),n=a/31536e3;return n>1?Be(n,"year"):(n=a/2592e3)>1?Be(n,"month"):(n=a/86400)>1?Be(n,"day"):(n=a/3600)>1?Be(n,"hour"):(n=a/60)>1?Be(n,"minute"):"just now"}(function(e){var t="string"==typeof e?new Date(e):e,a=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3),n=t.getTimezoneOffset()/60,o=t.getHours();return a.setHours(o-n),a}(c))))),!a&&n?o.a.createElement(E.T,{options:[{name:"Edit",handler:function(){return e=t.publicId,void window.open("".concat(i,"/").concat(e),"_blank");var e}},{name:"Delete",handler:function(){return e=t,void u.next({type:R.openDeleteCodeModal,requestType:"parallel",data:{selectedCode:e}});var e}}]}):null)})),Re=o.a.memo((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)([]),f=V(m,2),v=f[0],g=f[1],h=O.b.take(de,se),y=h.userCodesStream,_=h.profileInfoStream,S=O.b.take(de,ue).codeItemLoadingStream,w=new l.a;return Object(n.useEffect)((function(){return y.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(w),Object(p.a)((function(e){r(e)}))).subscribe(),_.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(w),Object(p.a)((function(e){u(e.isOwnProfile)}))).subscribe(),S.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(w),Object(p.a)((function(e){g(e)}))).subscribe(),function(){w.next(),w.complete()}}),[]),a?o.a.createElement("div",{className:"sl-p-all-codes"},o.a.createElement("div",{className:"sl-p-all-codes__header"},o.a.createElement("h3",{className:"sl-p-all-codes__title"},"Code Bits")),o.a.createElement("div",{className:"sl-p-all-codes-body-container"},o.a.createElement("div",{className:"sl-p-all-codes__body"},a&&a.map((function(e){return o.a.createElement(Fe,{key:e.id,code:e,isOwnProfile:s,loading:!!v.find((function(t){return t===e.id}))})}))))):null})),He=o.a.memo((function(){var e=O.b.take(de,Ne).actions,t=O.b.take("global",O.h),a=function(){t.close(F.deleteCodeModal)};return o.a.createElement(E.y,{modalId:F.deleteCodeModal,title:"Delete Code",info:"Are you sure, you want to delete this code?",actions:[{name:"Cancel",handler:a,btnType:"secondary"},{name:"Delete",handler:function(){e.next({type:R.deleteUserCode,requestType:"parallel"}),a()}}]})}));function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var We,Ge=function(e,t){return void 0===t&&(t={abortEarly:!1}),function(a,n,o){void 0===o&&(o=!1);try{return Promise.resolve(function(o,r){try{var l=(t.context,Promise.resolve(e.validate(a,qe({},t,{context:n}))).then((function(e){return{values:e,errors:{}}})))}catch(o){return r(o)}return l&&l.then?l.then(void 0,r):l}(0,(function(e){var t=function(e,t){var a;return Array.isArray(e.inner)&&e.inner.length?e.inner.reduce((function(e,a){var n,o,r=a.path,l=a.message,c=a.type,i=e[r]&&e[r].types||{},s=r||c;return qe({},e,s?((o={})[s]=qe({},e[s]||{message:l,type:c},t?{types:qe({},i,(n={},n[c]=i[c]?[].concat([].concat(i[c]),[l]):l,n))}:{}),o):{})}),{}):((a={})[e.path]={message:e.message,type:e.type},a)}(e,o);return{values:{},errors:Object(k.a)(t)}})))}catch(e){return Promise.reject(e)}}};!function(e){e.input="input",e.textarea="textarea",e.select="select",e.password="password"}(We||(We={}));var Ve,ze=o.a.memo((function(e){var t=e.label,a=e.type,r=e.id,l=e.name,c=e.register,i=e.error,s=e.selectOptions,u=e.watch,d=e.disabled,p=e.autoComplete,m=e.textAreaCssClass,b=Object(n.useState)(),f=V(b,2),v=f[0],g=f[1],h=u?u(r):null;return o.a.createElement("div",{className:"sl-p-form-field"},t?o.a.createElement("label",{className:"sl-p-form-field__label",htmlFor:r},t):null,a===We.input?o.a.createElement("input",{className:"sl-p-form-field__input ".concat(i?"sl-p-form-field__input--error":""),type:"text",id:r,name:l,ref:c,disabled:d}):null,a===We.textarea?o.a.createElement(E.Z,{defaultHeight:64,placeholder:"Describe yourself...",disabled:d,textAreaOptions:{name:l,id:r,ref:c},cssClass:m}):null,a===We.select?o.a.createElement(E.D,{options:s,placeholder:"Select a country...",value:h,type:E.i.country,disabled:d,cssClass:"sl-p-form-field__dropdown",selectOptions:{name:l,id:r,ref:c}}):null,a===We.password?o.a.createElement("div",{className:"sl-p-form-field__wrapper"},o.a.createElement("input",{className:"sl-p-form-field__input ".concat(i?"sl-p-form-field__input--error":""),type:v?"text":"password",id:r,name:l,ref:c,disabled:d,autoComplete:p}),o.a.createElement("span",{className:"sl-p-form-field__password-toggle",onClick:function(){return g(!v)}},v?"Hide":"Show")):null,o.a.createElement("p",{className:"sl-p-form-field__error"},i))}));!function(e){e[e.existingAvatar=0]="existingAvatar",e[e.noAvatar=1]="noAvatar",e[e.newAvatar=2]="newAvatar"}(Ve||(Ve={}));var Ye,Je=o.a.memo((function(e){var t,a=e.fileUrl,r=Object(n.useRef)(null),c=Object(n.useState)(),i=V(c,2),s=i[0],u=i[1],d=Object(n.useState)(),m=V(d,2),f=m[0],v=m[1],g=Object(n.useState)(),h=V(g,2),y=h[0],_=h[1],w=Object(n.useState)(!1),E=V(w,2),j=E[0],k=E[1],C=Object(n.useState)(!0),P=V(C,2),I=P[0],N=P[1],M=O.b.take(de,Ne).actions,A=O.b.take(de,ue).formLoadingStream,D=function(){r.current.value=""},T=function(){r.current.click()},U=function(){D(),M.next({type:R.uploadAvatar,requestType:"parallel",data:{avatar:null}})},L=function(){return function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],o=atob(a[1]),r=o.length,l=new Uint8Array(r);r--;)l[r]=o.charCodeAt(r);return new File([l],t,{type:n})}(y.getImageScaledToCanvas().toDataURL(),"newProfileAvatar")},B=function(){M.next({type:R.uploadAvatar,requestType:"parallel",data:{avatar:L()}})},F=function(){N(!1)};return Object(n.useEffect)((function(){var e=new l.a;return A.pipe(Object(b.a)(e),Object(p.a)((function(e){return k(!!e)}))).subscribe(),function(){e.next(),e.complete()}}),[]),Object(n.useEffect)((function(){u(a?Ve.existingAvatar:Ve.noAvatar),D()}),[a]),o.a.createElement("div",{className:"sl-p-avatar"},o.a.createElement("input",{ref:r,type:"file",className:"sl-p-avatar__file",accept:"image/png, image/jpeg",onInput:function(){var e;null!==(e=r.current.files)&&void 0!==e&&e.length&&v(r.current.files[0]),u(Ve.newAvatar)}}),o.a.createElement("div",{className:"sl-p-avatar__image-container"},(t=s)===Ve.existingAvatar&&I?o.a.createElement("img",{src:a,alt:"user_avatar",className:"sl-p-avatar__image sl-p-avatar__image--existing ".concat(j?"sl-p-avatar__image--disabled":""),onError:F}):t===Ve.noAvatar||t===Ve.existingAvatar&&!I?o.a.createElement("div",{className:"sl-p-avatar__image sl-p-avatar__image--default ".concat(j?"sl-p-avatar__image--disabled":"")},o.a.createElement("div",{className:"sl-p-avatar__default-icon"},o.a.createElement(S.a,{iconId:"avatarFill"}))):o.a.createElement("div",{className:"sl-p-avatar__editor ".concat(j?"sl-p-avatar__editor--disabled":"")},o.a.createElement(x.a,{ref:_,image:f,width:130,height:130,border:0,borderRadius:50,style:{borderRadius:"50%",maxHeight:"100%"}}),o.a.createElement("div",{className:"sl-p-avatar__drag-shadow"},o.a.createElement("div",{className:"sl-p-avatar__move-icon"},o.a.createElement(S.a,{iconId:"move"}))))),o.a.createElement("div",{className:"sl-p-avatar__actions"},o.a.createElement("div",{className:"sl-p-avatar__actions--buttons"},function(e){return e===Ve.noAvatar?o.a.createElement("button",{className:"sl-p-avatar__button sl-p-avatar__button--upload",onClick:T,disabled:j,type:"button"},"Upload"," ",o.a.createElement("div",{className:"sl-p-avatar__button-icon sl-p-avatar__button-icon--upload"},o.a.createElement(S.a,{iconId:"upload"}))):e===Ve.existingAvatar?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"sl-p-avatar__button",type:"button",onClick:T,disabled:j},"Change"),o.a.createElement("button",{className:"sl-p-avatar__button sl-p-avatar__button--delete",type:"button",onClick:U,disabled:j},o.a.createElement("div",{className:"sl-p-avatar__button-icon sl-p-avatar__button-icon--delete"},o.a.createElement(S.a,{iconId:"deleteIcon"})))):o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"sl-p-avatar__button--secondary",onClick:T,disabled:j,type:"button"},"Change"),o.a.createElement("button",{className:"sl-p-avatar__button sl-p-avatar__button--set",type:"button",onClick:B,disabled:j},"Set"))}(s)),o.a.createElement("div",{className:"sl-p-avatar__actions--info"},"JPG, GIF or PNG. Max size 800K")))})),Xe=o.a.memo((function(e){var t=e.messages,a=e.type;return t?o.a.createElement("div",{className:"sl-p-form-messages sl-p-form-messages--".concat(a)},t.map((function(e,t){return o.a.createElement("p",{key:t},e)}))):null})),Ke=P.a().shape({name:P.c().trim("Required").required("Required").min(3,"Minimum 3 characters are required"),email:P.c().required("Required").email("Invalid email address"),bio:P.c().max(150,"Maximum 150 characters allowed"),countryCode:P.c()}),$e=o.a.memo((function(){var e,t,a,r,c=Object(n.useState)(),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)(null),f=V(m,2),v=f[0],g=f[1],h=Object(n.useState)(null),y=V(h,2),_=y[0],S=y[1],w=Object(n.useState)(!0),E=V(w,2),j=E[0],C=E[1],x=Object(n.useState)(null),P=V(x,2),I=P[0],N=P[1],M=O.b.take(de,se),A=M.userDetailsStream,D=M.formMessageStream,T=M.countriesStream,U=O.b.take(de,Ne).actions,L=O.b.take(de,ue).formLoadingStream,B=Object(k.b)({mode:"onChange",reValidateMode:"onChange",resolver:Ge(Ke)}),F=B.register,H=B.handleSubmit,q=B.errors,W=B.setValue,G=B.watch;Object(n.useEffect)((function(){var e=new l.a;return A.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){!function(e){var t;g(e.id.toString()),W("name",e.name),W("email",e.email),W("bio",e.bio),W("countryCode",null===(t=e.countryCode)||void 0===t?void 0:t.toLowerCase()),S(e.avatarUrl)}(e)}))).subscribe(),D.pipe(Object(b.a)(e),Object(p.a)((function(e){return u(e)}))).subscribe(),L.pipe(Object(b.a)(e),Object(p.a)((function(e){return C(!!e)}))).subscribe(),T.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){return N(e)}))).subscribe(),function(){D.next(null),e.next(),e.complete()}}),[]),Object(n.useEffect)((function(){var e,t;W("countryCode",null===(e=A.value)||void 0===e||null===(t=e.countryCode)||void 0===t?void 0:t.toLocaleLowerCase())}),[I]);return o.a.createElement("div",{className:"sl-p-details-form"},o.a.createElement("h2",{className:"sl-p-details-form__heading"},"Information"),o.a.createElement("form",{className:"sl-p-details-form__form",onSubmit:H((function(e){U.next({requestType:"cancelable",type:R.updateProfileInfo,data:{profileId:v,updateInfo:e}})}))},o.a.createElement(Je,{fileUrl:_}),o.a.createElement(Xe,{messages:null==s?void 0:s.messages,type:null==s?void 0:s.type}),o.a.createElement(ze,{type:We.input,label:"Username",id:"name",name:"name",register:F,error:null===(e=q.name)||void 0===e?void 0:e.message,disabled:j}),o.a.createElement(ze,{type:We.input,label:"Email address",id:"email",name:"email",register:F,error:null===(t=q.email)||void 0===t?void 0:t.message,disabled:j}),o.a.createElement(ze,{type:We.textarea,label:"Bio",id:"bio",name:"bio",register:F,error:null===(a=q.bio)||void 0===a?void 0:a.message,disabled:j,textAreaCssClass:"sl-p-details-form__text_area"}),o.a.createElement(ze,{type:We.select,label:"Country",id:"countryCode",name:"countryCode",register:F,error:null===(r=q.countryCode)||void 0===r?void 0:r.message,selectOptions:(null==I?void 0:I.reduce((function(e,t){return[].concat(ee(e),[{value:null==t?void 0:t.char2Code.toLowerCase(),label:null==t?void 0:t.name}])}),[]))||[],watch:G,disabled:j}),o.a.createElement("input",{className:"sl-p-details-form__submit",type:"submit",value:"Save",disabled:j})))})),Qe=P.a().shape({current:P.c().required("Required"),new:P.c().required("Required").min(6,"Minimum 6 characters are required").notOneOf([P.b("current"),null],(function(e){return e.value?e.value.length<6?"Minimum 6 characters are required":"Your new password cannot be the same as your current one":"Required"}))}),Ze=o.a.memo((function(){var e,t,a=Object(n.useState)(),r=V(a,2),c=r[0],i=r[1],s=Object(n.useState)(),u=V(s,2),d=u[0],m=u[1],f=Object(k.b)({mode:"onBlur",reValidateMode:"onBlur",resolver:Ge(Qe)}),v=f.register,g=f.handleSubmit,h=f.errors,y=f.setValue,_=O.b.take(de,Ne).actions,S=O.b.take(de,ue).formLoadingStream,w=O.b.take(de,se).formMessageStream;return Object(n.useEffect)((function(){var e=new l.a;return w.pipe(Object(b.a)(e),Object(p.a)((function(e){i(e),"success"===(null==e?void 0:e.type)&&(y("current","",{shouldValidate:!1}),y("new","",{shouldValidate:!1}))}))).subscribe(),S.pipe(Object(b.a)(e),Object(p.a)((function(e){return m(!!e)}))).subscribe(),function(){w.next(null),e.next(),e.complete()}}),[]),o.a.createElement("div",{className:"sl-p-password-form"},o.a.createElement("h2",{className:"sl-p-password-form__heading"},"Password"),o.a.createElement("form",{className:"sl-p-password-form__form",onSubmit:g((function(e){_.next({requestType:"cancelable",type:R.updatePassword,data:{passwords:e}})}))},o.a.createElement(Xe,{messages:null==c?void 0:c.messages,type:null==c?void 0:c.type}),o.a.createElement(ze,{type:We.password,label:"Current Password",id:"current",name:"current",register:v,error:null===(e=h.current)||void 0===e?void 0:e.message,disabled:d,autoComplete:"off"}),o.a.createElement(ze,{type:We.password,label:"New Password",id:"new",name:"new",register:v,error:null===(t=h.new)||void 0===t?void 0:t.message,disabled:d,autoComplete:"new-password"}),o.a.createElement("input",{className:"sl-p-password-form__submit",type:"submit",value:"Change",disabled:d})))})),et=o.a.memo((function(e){var t=e.subscription;return o.a.createElement("div",{className:"sl-p-current-sub"},o.a.createElement("span",{className:"sl-p-current-sub__status ".concat(t.isActive?"sl-p-current-sub__status--active":"sl-p-current-sub__status--canceled")},t.isActive?"Active":"Inactive"),o.a.createElement("p",{className:"sl-p-current-sub__name"},"Sololearn PRO"),o.a.createElement("div",{className:"sl-p-current-sub__months"},"annual"===t.plan.type?"Annual":"Monthly"," ","subscription"))})),tt=o.a.memo((function(e){var t=e.subscription;return o.a.createElement("div",{className:"sl-p-next-payment"},o.a.createElement("p",{className:"sl-p-next-payment__header"},"Next Payment"),o.a.createElement("span",{className:"sl-p-next-payment__description"},"On ",Le(t.nextBillDate)," you will be charged ",t.plan.discountedAmount,"$ for your Sololearn PRO subscription."))})),at=o.a.memo((function(e){var t,a=e.subscription;return o.a.createElement("div",{className:"sl-p-payment-method"},o.a.createElement("p",{className:"sl-p-payment-method__header"},"Payment method"),o.a.createElement("div",{className:"sl-p-payment-method__description"},o.a.createElement("img",{alt:"payment-method",className:"sl-p-payment-method__card-icon",src:a.paymentMethodImage}),o.a.createElement("span",null,"paypal"===a.paymentMethod?null===(t=a.payPalInfo)||void 0===t?void 0:t.email:"".concat(a.creditCardInfo.name?"".concat(a.creditCardInfo.name,", "):""," ending in ").concat(a.creditCardInfo.endsWith))))})),nt=o.a.memo((function(e){var t=e.subscription;return o.a.createElement("div",{className:"sl-p-cancellation_details"},o.a.createElement("p",{className:"sl-p-cancellation_details__header"},"Details"),o.a.createElement("span",{className:"sl-p-cancellation_details__description"},"You still have access to Sololearn PRO till"," ",Le(t.paidThroughDate)))})),ot=o.a.memo((function(e){var t=e.subscription,a=O.b.take(de,Ne).actions;return o.a.createElement("div",{className:"sl-p-subscription"},!t.web&&o.a.createElement("div",{className:"sl-p-subscription__mobile"},o.a.createElement("div",{className:"sl-p-subscription__warning"},o.a.createElement(S.a,{iconId:"exclamationRoundedFill"})),o.a.createElement("p",{className:"sl-p-subscription__mobile-message"},"Please go to AppStore or Play Store to manage your subscription.")),t.web&&o.a.createElement("div",{className:"sl-p-subscription__web"},o.a.createElement("section",{className:"sl-p-subscription__block"},o.a.createElement("h3",{className:"sl-p-subscription__heading"},"Current plan"),o.a.createElement(et,{subscription:t.web})),t.web.isActive?o.a.createElement("section",{className:"sl-p-subscription__block"},o.a.createElement(tt,{subscription:t.web})):o.a.createElement("section",{className:"sl-p-subscription__block"},o.a.createElement(nt,{subscription:t.web})),o.a.createElement("section",{className:"sl-p-subscription__block"},o.a.createElement(at,{subscription:t.web})),t.web.isActive&&o.a.createElement("button",{className:"sl-p-subscription__cancel",onClick:function(){a.next({type:R.confirmCancellation,requestType:"parallel"})},type:"button"},"Cancel Subscription")))})),rt=o.a.memo((function(e){var t=e.plans,a=Object(n.useState)(!1),r=V(a,2),c=r[0],i=r[1],s=O.b.take(de,ie).trackAction;Object(n.useEffect)((function(){var e=new l.a;return O.b.take(de,se).wasUserProStream.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){i(null==e?void 0:e.wasUserPro)}))).subscribe(),s.next({action:"view",element:"pro_editprofile"}),function(){e.next(),e.complete()}}),[]);var u=function(e){return Math.round(100-e.discountedAmount/e.amount*100)};return o.a.createElement("div",{className:"sl-p-plans"},t.map((function(e){return o.a.createElement("div",{className:"sl-p-plans__item",key:e.id},u(e)?o.a.createElement(E.V,{text:"Save",percent:u(e),cssClass:"sl-p-plans__discount"}):"",o.a.createElement("div",{className:"sl-p-plans__item__logo ".concat("monthly"===e.type?"monthly":"")},o.a.createElement(S.a,{iconId:"annual"===e.type?"proAnnualPig":"proMonthlyCalendar"})),o.a.createElement("h4",{className:"sl-p-plans__name"},"annual"===e.type?"Annual":"Monthly"),o.a.createElement("div",{className:"sl-p-plans__info"},o.a.createElement("p",{className:"sl-p-plans__price"},"$",function(e){return"monthly"===e.type?e.discountedAmount:Number((e.discountedAmount/12).toFixed(2))}(e),o.a.createElement("span",null,"/mo")),o.a.createElement("p",{className:"sl-p-plans__billing-info"},function(e){return"Billed ".concat("monthly"===e.type?"monthly":"annually"," as $").concat(e.discountedAmount)}(e))),o.a.createElement(w.a,{className:"sl-p-plans__button sl-p-plans__button--".concat("annual"===e.type?"primary":"secondary"),to:"/payments/checkout/".concat(e.id,"?returnUrl=").concat(encodeURIComponent(window.location.pathname),"&source=editprofile"),onClick:function(){return t=e.id,void s.next({action:"select",element:"pro_editprofile",entityId:t});var t}},"annual"===e.type?(t=e.trialDays,c?"Practice for 12 more months":"Try ".concat(t," Days For Free")):"Select Plan"));var t})))})),lt=o.a.memo((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=O.b.take(de,se).proManagementStream;return Object(n.useEffect)((function(){var e=new l.a;return c.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){r(e)}))).subscribe(),function(){e.next(),e.complete()}}),[]),o.a.createElement("div",{className:"sl-p-pro"},o.a.createElement("h2",{className:"sl-p-pro__heading"},"Sololearn ",o.a.createElement("span",{className:"sl-p-pro__heading__pro"},"PRO")),a?o.a.createElement(o.a.Fragment,null,a.isPro&&o.a.createElement(ot,{subscription:a.subscription}),!a.isPro&&o.a.createElement(rt,{plans:a.plans})):o.a.createElement("div",null,"Loading..."))})),ct=function(e){var t=e.account,a=e.connectedAccount,r=Object(n.useState)(!1),c=V(r,2),i=c[0],s=c[1],u=O.b.take(de,Ne).actions;return Object(n.useEffect)((function(){var e=new l.a;return O.b.take(de,ue).disconnectAccountLoadingStream.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){s(e[null==a?void 0:a.connectionId])}))).subscribe(),function(){e.next(),e.complete()}}),[null==a?void 0:a.connectionId]),o.a.createElement("div",{className:"sl-p-account".concat(a?" connected":"")},o.a.createElement("div",{className:"sl-p-account__main".concat(a?" connected":"")},o.a.createElement("div",{className:"sl-p-account__icon"},o.a.createElement(S.a,{iconId:t.toLowerCase()})),o.a.createElement("p",{className:"sl-p-account__name"},t),o.a.createElement("div",{className:"sl-p-account__action"},a?o.a.createElement("div",{className:"sl-p-account__action__toggle"},o.a.createElement(E.Y,{checked:a.isVisible,onChange:function(e){u.next({requestType:"parallel",type:R.updateConnectedAccount,data:{connectionId:a.connectionId,isVisible:e}})}}),o.a.createElement("span",null,"Public")):o.a.createElement("button",{type:"button",className:"sl-p-account__connect-btn",onClick:function(){t!==j.mb.LinkedIn?window.open(function(e){var t="&redirect_uri=".concat(encodeURIComponent("".concat(window.location.origin,"/connect-account")),"?service=").concat(e.toLowerCase());if(e===j.mb.GitHub){var a={clientId:O.b.take(de,"githubClientId"),baseUrl:"https://github.com/login/oauth/authorize"};return"".concat(a.baseUrl,"?client_id=").concat(a.clientId).concat(t)}if(e===j.mb.StackOverflow){var n={clientId:O.b.take(de,"stackoverflowClientId"),baseUrl:"https://stackoverflow.com/oauth",scope:"read_inbox,no_expiry"};return"".concat(n.baseUrl,"?client_id=").concat(n.clientId,"&scope=").concat(n.scope).concat(t)}return""}(t),"connect-".concat(t.toLowerCase()),"menubar=1,resizable=1,width=500,height=700"):u.next({requestType:"parallel",type:R.openConnectLinkedinModal})}},"Connect"))),a&&o.a.createElement("div",{className:"sl-p-account__connected"},o.a.createElement("div",{className:"sl-p-account__connected__avatar"},a.avatarUrl?o.a.createElement("img",{src:a.avatarUrl,alt:"".concat(t,"-avatar")}):o.a.createElement(S.a,{iconId:"connectedAccountAvatar"})),o.a.createElement("div",{className:"sl-p-account__connected__info"},o.a.createElement("p",null,a.name),o.a.createElement("span",null,"Connected")),o.a.createElement("button",{onClick:function(){u.next({requestType:"parallel",type:R.deleteConnectedAccount,data:{connectionId:a.connectionId}})},className:"sl-p-account__disconnect-btn",disabled:i,type:"button"},i?o.a.createElement(E.ab,null):"Disconnect")))},it=function(){var e=[j.mb.LinkedIn,j.mb.GitHub,j.mb.StackOverflow],t=Object(n.useState)([]),a=V(t,2),r=a[0],c=a[1],i=O.b.take(de,Ne).actions,s=function(e){"error"===e.data.type?i.next({type:R.showFlashMessage,requestType:"parallel",data:e.data}):"success"===e.data.type&&i.next({type:R.addConnectedAccount,requestType:"parallel",data:e.data.account})};return Object(n.useEffect)((function(){var e=new l.a;return window.addEventListener("message",s),O.b.take(de,se).userDetailsStream.pipe(Object(b.a)(e)).subscribe((function(e){c(e.displayConnectedAccounts)})),function(){window.removeEventListener("message",s),e.next(),e.complete()}}),[]),o.a.createElement("div",{className:"sl-p-connected-accounts"},o.a.createElement("h2",{className:"sl-p-connected-accounts__heading"},"Connected Accounts"),o.a.createElement("div",{className:"sl-p-connected-accounts__body"},e.map((function(e){var t=r.find((function(t){return t.service===e}));return o.a.createElement(ct,{key:e,account:e,connectedAccount:t})}))))},st=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new URLSearchParams(t.search);n.has(e)&&n.delete(e),Object(w.e)("".concat(t.pathname).concat(n.toString()?"?".concat(n.toString()):""),{replace:a})};!function(e){e[e.info=0]="info",e[e.password=1]="password",e[e.pro=2]="pro",e[e.connectedAccounts=3]="connectedAccounts"}(Ye||(Ye={}));var ut=[{id:Ye.info,title:"Information"},{id:Ye.password,title:"Password"},{id:Ye.connectedAccounts,title:"Connected Accounts"},{id:Ye.pro,title:"Sololearn PRO"}],dt=o.a.memo((function(){var e=Object(n.useState)(window.innerWidth<600),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(!0),i=V(c,2),s=i[0],d=i[1],m=Object(n.useState)(a?null:Ye.info),f=V(m,2),v=f[0],g=f[1],h=Object(w.f)(),y=Object(n.useCallback)((function(){var e=O.b.take("global",O.h);st("settings",h),e.close(F.editProfileModal)}),[]);return Object(n.useEffect)((function(){a||null!==v||g(Ye.info)}),[a,v]),Object(n.useEffect)((function(){var e=new l.a;return Object(u.a)(window,"resize").pipe(Object(b.a)(e)).subscribe((function(){r(window.innerWidth<600)})),O.b.take(de,ue).formLoadingStream.pipe(Object(b.a)(e),Object(p.a)((function(e){return d(!!e)}))).subscribe(),function(){e.next(),e.complete()}}),[]),o.a.createElement("div",{className:"sl-p-edit-profile"},o.a.createElement("hr",{className:"sl-p-edit-profile__line"}),o.a.createElement("ul",{className:"sl-p-edit-profile__nav"},o.a.createElement("h2",{className:"sl-p-edit-profile__heading"},a&&o.a.createElement("div",{className:"sl-p-edit-profile__arrow-icon sl-p-edit-profile__arrow-icon--left",onClick:function(){a&&null!==v?g(null):y()}},o.a.createElement(S.a,{iconId:"caretDown"})),o.a.createElement("span",{className:"sl-p-edit-profile__heading--text"},a&&null!==v?ut[v].title:"Edit Profile")),a&&null!==v?null:ut.map((function(e){return o.a.createElement("li",{className:"sl-p-edit-profile__nav-item ".concat(e.id===v?"sl-p-edit-profile__nav-item--active":"sl-p-edit-profile__nav-item--inactive".concat(s?" sl-p-edit-profile__nav-item--disabled":"")),key:e.id,onClick:function(){return t=e.id,void(s||g(t));var t}},e.title,a&&o.a.createElement("div",{className:"sl-p-edit-profile__arrow-icon sl-p-edit-profile__arrow-icon--right"},o.a.createElement(S.a,{iconId:"caretDown"})))}))),a&&null===v?null:o.a.createElement("div",{className:"sl-p-edit-profile__body"},v===Ye.info&&o.a.createElement($e,null),v===Ye.password&&o.a.createElement(Ze,null),v===Ye.pro&&o.a.createElement(lt,null),v===Ye.connectedAccounts&&o.a.createElement(it,null)))})),pt=o.a.memo((function(){var e=O.b.take(de,Ne).actions,t=O.b.take("global",O.h),a=function(){t.close(F.resetCourseModal)};return o.a.createElement(E.y,{modalId:F.resetCourseModal,title:"Reset Course",info:"All your progress on this course will be lost. Are you sure you want to continue?",actions:[{name:"Dont Reset",handler:a,btnType:"secondary"},{name:"Reset Anyway",handler:function(){e.next({type:R.resetCourseProgress,requestType:"parallel"}),a()}}]})})),mt=o.a.memo((function(){var e=O.b.take(de,Ne).actions,t=O.b.take("global",O.h),a=function(){t.close(F.deleteCourseModal)};return o.a.createElement(E.y,{modalId:F.deleteCourseModal,title:"Delete Course",info:"Are you sure, you want to remove this course?",actions:[{name:"Cancel",handler:a,btnType:"secondary"},{name:"Delete",handler:function(){e.next({type:R.deleteCourseProgress,requestType:"parallel"}),a()}}]})})),bt=Object(n.memo)((function(e){var t=e.courseProgress,a=e.isOwnProfile,n=e.isPreview,r=e.loading,l=O.b.take(de,Ne).actions,c=O.b.take(de,ie).trackAction;return o.a.createElement(w.a,{to:"/learning/".concat(t.courseId),onClick:function(e){r?e.preventDefault():c.next({action:"click",element:a?"course_selection_profile":"course_selection_otherprofile",entityId:t.courseId})}},o.a.createElement("div",{className:"sl-p-progress ".concat(r?"sl-p-progress--loading":""),key:t.courseId},o.a.createElement("div",{className:"sl-p-progress__icon"},o.a.createElement("img",{className:"sl-p-progress__image",src:t.courseIconURL,alt:"course-icon"})),o.a.createElement("div",{className:"sl-p-progress__content"},o.a.createElement("div",{className:"sl-p-progress__body"},o.a.createElement("div",{className:"sl-p-progress__body__label"},o.a.createElement("span",{className:"sl-p-progress__body__label__name"},t.courseName),o.a.createElement("span",{className:"sl-p-progress__body__label__sec"},(100*t.progress).toFixed(),"%")),o.a.createElement("progress",{className:"sl-p-progress__body__progress",max:"1",value:t.progress})),n?o.a.createElement("div",{className:"sl-p-progress__action"},o.a.createElement(S.a,{iconId:"play"})):null),a&&!n?o.a.createElement(E.T,{options:[{name:"Delete",handler:function(){return function(e){l.next({type:R.openDeleteCourseModal,requestType:"parallel",data:{selectedCourseProgress:e}})}(t)}}]}):null))})),ft=Object(n.memo)((function(){var e=Object(n.useState)(),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)([]),f=V(m,2),v=f[0],g=f[1],h=O.b.take(de,se),y=h.coursesProgressStream,_=h.profileInfoStream,S=O.b.take(de,ue).coursesProgressItemLoadingStream,w=new l.a;return Object(n.useEffect)((function(){return y.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(w),Object(p.a)((function(e){r(e||null)}))).subscribe(),_.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(w),Object(p.a)((function(e){u(e.isOwnProfile)}))).subscribe(),S.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(w),Object(p.a)((function(e){g(e)}))).subscribe(),function(){w.next(),w.complete()}}),[]),a?o.a.createElement("div",{className:"sl-p-all-progress-modal"},o.a.createElement("div",{className:"sl-p-all-progress-modal__header"},o.a.createElement("h3",{className:"sl-p-all-progress-modal__title"},"Course Progress")),o.a.createElement("div",{className:"sl-p-all-progress-modal-body-container"},o.a.createElement("div",{className:"sl-p-all-progress-modal__body"},a.map((function(e){return o.a.createElement(bt,{courseProgress:e,key:e.courseId,isOwnProfile:s,loading:!!v.find((function(t){return t===e.courseId}))})}))))):null})),vt=o.a.memo((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=O.b.take(de,se).selectedCertificateStream;return Object(n.useEffect)((function(){var e=new l.a;return c.pipe(Object(b.a)(e),Object(p.a)((function(e){return r(e)}))).subscribe(),function(){e.next(),e.complete()}}),[]),a?o.a.createElement("div",{className:"sl-p-certificate"},o.a.createElement(E.u,{imageUrl:a.imageUrl,pdfUrl:a.url})):null})),gt=o.a.memo((function(){var e=Object(n.useState)(!1),t=V(e,2),a=t[0],r=t[1],c=O.b.take(de,Ne).actions,i=O.b.take("global",O.h),s=O.b.take(de,ue).cancelSubscriptionLoadingStream,u=new l.a;Object(n.useEffect)((function(){var e=O.b.take(de,ie).tagManager;s.pipe(Object(b.a)(u),Object(p.a)((function(t){t&&e.next({event:"CancelSubscription"}),r(t)}))).subscribe()}),[]);return o.a.createElement(E.y,{modalId:F.cancelSubscription,closeBtnCallback:function(){if(a)return!1},title:"Cancel Subscription",info:"Are you sure you want to cancel your subscription? You will lose access to all pro benefits.",actions:[{name:"Dont cancel",handler:function(){i.close(F.cancelSubscription)},btnType:"secondary",disabled:a},{name:"Cancel",handler:function(){c.next({requestType:"cancelable",type:R.cancelSubscription})},disabled:a}]})})),ht=o.a.memo((function(){var e,t,a=Object(n.useState)(null),r=V(a,2),c=r[0],i=r[1],s=O.b.take("global",O.h),u=O.b.take(de,se).proManagementStream;Object(n.useEffect)((function(){var e=new l.a;return u.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){i(e)}))).subscribe(),function(){e.next(),e.complete()}}),[]);return o.a.createElement("div",{className:"sl-p-succeedCancelSubscription-modal"},o.a.createElement("div",{className:"sl-p-succeedCancelSubscription-modal__illustration"},o.a.createElement(S.a,{iconId:"sadFaceIllustration"})),o.a.createElement("h2",{className:"sl-p-succeedCancelSubscription-modal__heading"},"Sorry to see you go"),(null==c?void 0:c.subscription)&&o.a.createElement("p",{className:"sl-p-succeedCancelSubscription-modal__desc"},"You still have access to Sololearn Pro until"," ",Le(null==c||null===(e=c.subscription)||void 0===e||null===(t=e.web)||void 0===t?void 0:t.paidThroughDate)," ","and Youre always welcome back."),o.a.createElement("div",{className:"sl-p-succeedCancelSubscription-modal__buttons"},o.a.createElement("button",{type:"button",onClick:function(){s.close(F.succeedCancelSubscription)}},"Got it")))})),yt=o.a.memo((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)(null),f=V(m,2),v=f[0],g=f[1],h=Object(n.useState)(null),y=V(h,2),_=y[0],S=y[1],k=Object(n.useState)(!1),C=V(k,2),x=C[0],P=C[1],I=Object(w.f)(),N=O.b.take(de,Ne).actions,M=O.b.take("global",O.h),A=O.b.take(de,ie).trackAction,D=O.b.take(de,se).unlockWithBitsModalStream,T=O.b.take("global",O.c).bitsStream;Object(n.useEffect)((function(){var e=O.b.take(de,se).wasUserProStream,t=new l.a;return D.pipe(Object(b.a)(t)).subscribe((function(e){var t,a;e&&(r(e.id),u(e.itemType),S(e.price),g(null===(t=T.value)||void 0===t?void 0:t.currentValue),A.next({action:"view",element:(null===(a=T.value)||void 0===a?void 0:a.currentValue)>=e.price?"bitpopup-unlock":"bitpopup",entityId:e.id}))})),T.pipe(Object(b.a)(t)).subscribe((function(e){e&&g(null==e?void 0:e.currentValue)})),e.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(t),Object(p.a)((function(e){P(null==e?void 0:e.wasUserPro)}))).subscribe(),function(){t.next(),t.complete()}}),[]);return o.a.createElement(E.eb,{itemType:s,bits:v,bitsNeeded:_,unlockBtnCallback:function(){s===j.gb.codeCoach&&A.next({action:"click",element:"bitpopup-unlock_bits",entityId:a}),N.next({type:R.unlockItemWithBits,requestType:"cancelable",data:{itemType:s,itemId:a}})},proBtnCallback:function(){var e,t={toProSource:"bit_profilecc",query:"?codecoachid=".concat(a),trackingData:null};s===j.gb.codeCoach&&(t.trackingData={action:"click",element:v>=_?"bitpopup-unlock_pro":"bitpopup_pro",entityId:a}),e=t,N.next({type:R.navigateToPro,requestType:"cancelable",data:e})},closeBtnCallback:function(){new URLSearchParams(I.search).has("modal")&&Object(E.ib)(["modal","ccid"],I),M.close(F.unlockWithBitsModal)},proButtonText:x?"Go PRO for 12 months":""})})),_t=function(){var e="https://linkedin.com/in/",t=Object(n.useState)(e),a=V(t,2),r=a[0],c=a[1],i=Object(n.useState)(!0),s=V(i,2),u=s[0],d=s[1],m=Object(n.useState)(!1),f=V(m,2),v=f[0],g=f[1];return Object(n.useEffect)((function(){var e=new l.a;return O.b.take(de,ue).linkedinConnectLoadingStream.pipe(Object(b.a)(e),Object(p.a)(g)).subscribe(),function(){e.next(),e.complete()}}),[]),o.a.createElement("div",{className:"sl-p-connected-linkedin"},o.a.createElement("h1",{className:"sl-p-connected-linkedin__header"},"Connect to Linkedin"),o.a.createElement("h2",{className:"sl-p-connected-linkedin__info"},"Add your Linkedin profile to showcase your lifetime achievements"),o.a.createElement("input",{onChange:function(t){var a=t.target.value.trim();a.includes(e)?(a.includes("https://www.linkedin.com/in/")&&(a=a.replace("https://www.linkedin.com/in/","")),d(!0),c(a)):c(e)},value:r,className:"sl-p-connected-linkedin__input".concat(u?"":" not-valid"),maxLength:100,type:"text"}),o.a.createElement("button",{onClick:function(){r!==e?O.b.take(de,Ne).actions.next({type:R.connectedAccount,requestType:"parallel",data:{service:j.mb.LinkedIn.toLowerCase(),code:r.replace(e,"")}}):d(!1)},className:"sl-p-connected-linkedin__connect-btn",disabled:v,type:"button"},v?o.a.createElement(E.ab,null):"Connect"))},Ot=M(A((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})));function St(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function wt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?St(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Et=o.a.memo((function(e){var t,a=e.userId,r=e.name,l=e.avatarURL,c=e.countryCode,i=e.level,s=e.isFollowing,u=Object(n.useState)(!0),d=V(u,2),p=d[0],m=d[1],b=Object(n.useState)(s),f=V(b,2),v=f[0],g=f[1],h=O.b.take(de,se),y=h.countriesStream,_=h.userDetailsStream,j=O.b.take(de,Ne).actions,k=O.b.take("global",O.a),C=O.b.take("global",O.h);return o.a.createElement(w.a,{to:"/profile/".concat(a),onClick:function(){C.close(F.followsModal)},className:"sl-p-follow-item"},o.a.createElement("div",{className:"sl-p-follow-item__avatar__wrapper"},o.a.createElement("div",{className:"sl-p-follow-item__avatar"},l&&p?o.a.createElement("img",{className:"sl-p-follow-item__avatar-image",src:l,alt:"user-avatar",onError:function(){m(!1)}}):o.a.createElement("div",{className:"sl-p-follow-item__avatar-image sl-p-follow-item__default-avatar"},o.a.createElement("div",{className:"sl-p-follow-item__default-avatar__icon"},o.a.createElement(S.a,{iconId:"avatarFill"}))))),o.a.createElement("div",{className:"sl-p-follow-item__info"},o.a.createElement("div",{className:"sl-p-follow-item__name"},r),o.a.createElement("div",{className:"sl-p-follow-item__country-and-level"},c?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sl-p-follow-item__country"},o.a.createElement("div",{className:"sl-p-follow-item__country-flag"},o.a.createElement(E.z,{size:"sm",countryCode:c})),y.value?o.a.createElement("p",{className:"sl-p-follow-item__country-name"},function(e){var t,a,n=null==e?void 0:e.toLowerCase();return null===(t=y.value)||void 0===t||null===(a=t.find((function(e){return e.char2Code.toLowerCase()===n})))||void 0===a?void 0:a.name}(c)):null),o.a.createElement("span",{className:"sl-p-follow-item__country-level-seperator"},"")):null,o.a.createElement("span",null,"Lvl ",i)),(null===(t=k.getUser())||void 0===t?void 0:t.id)===a?null:o.a.createElement("button",{type:"button",className:"sl-p-follow-item__follow-button ".concat(v?"following":"follow"),onClick:function(e){var t;e.preventDefault(),e.stopPropagation(),j.next({type:v?R.unfollowProfile:R.followProfile,requestType:"parallel",data:{profileId:a.toString()}}),(null===(t=k.getUser())||void 0===t?void 0:t.id)===_.value.id&&_.next(wt(wt({},_.value),{},{following:v?_.value.following-1:_.value.following+1})),g(!v)}},v?"Following":"Follow")))})),jt=o.a.memo((function(){var e=O.b.take(de,se),t=e.followsTypeStream,a=e.followersStream,r=e.followingStream,c=e.userDetailsStream,i=O.b.take(de,Ne).actions,s=Object(n.useState)(!0),u=V(s,2),m=u[0],f=u[1],v=Object(n.useState)(t.value||null),g=V(v,2),h=g[0],y=g[1],_=Object(n.useState)([]),S=V(_,2),w=S[0],j=S[1],k=Object(n.useState)(null),C=V(k,2),x=C[0],P=C[1],I=Object(n.useState)(null),N=V(I,2),M=N[0],A=N[1],D=Object(n.useState)(1),T=V(D,2),U=T[0],L=T[1],B=Object(n.useState)(!1),F=V(B,2),H=F[0],q=F[1],W=function(){i.next({requestType:"cancelable",type:"followers"===h?R.getFollowers:R.getFollowing,data:{userId:c.value.id,pagination:{count:100,page:U}}})};Object(n.useEffect)((function(){var e=new l.a;return t.pipe(Object(b.a)(e)).subscribe(y),function(){i.next({requestType:"cancelable",type:R.destroyApiCall}),t.next(null),a.next(null),r.next(null),e.next(),e.complete()}}),[]),Object(n.useEffect)((function(){var e=new l.a;h&&(("followers"===h?a:r).pipe(Object(b.a)(e),Object(d.a)((function(e){return!!e}))).subscribe(P),c.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){A(e[h])}))).subscribe(),W(),O.b.take(de,ie).trackAction.next({action:"view",element:"followers"===h?"followers_profile":"following_profile",entityId:c.value.id}));return function(){e.next(),e.complete()}}),[h]),Object(n.useEffect)((function(){if(x){var e=[].concat(ee(w),ee(x));j(e),e.length<M&&(L(U+1),q(!0)),f(!1)}}),[x]);var G=function(e){H&&e.currentTarget.scrollTop+e.currentTarget.clientHeight>=.98*e.currentTarget.scrollHeight&&(q(!1),W())};return o.a.createElement("div",{className:"sl-p-follows-modal"},m?o.a.createElement(E.M,{backgroundColor:"transparent"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"sl-p-follows-modal__title"},M," ","followers"===h?"Follower".concat(1===M?"":"s"):"Following"),m?o.a.createElement(E.M,{backgroundColor:"transparent"}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sl-p-follows-modal__body__container",onScroll:G},null==w?void 0:w.map((function(e){return o.a.createElement(Et,Ot({},e,{key:e.userId}))}))))))})),kt=function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=O.b.take(de,Ne).actions,i=O.b.take("global",O.h),s=O.b.take("global",O.a),u=O.b.take(de,ie).trackAction,p=O.b.take(de,se).oldUsersGamificationStream;Object(n.useEffect)((function(){var e=new l.a;return p.pipe(Object(b.a)(e),Object(d.a)((function(e){return!!e}))).subscribe((function(e){var t,a;r(null!==(t=s.getUser())&&void 0!==t&&t.isPro?e.pro:e.nonPro),u.next({action:"view",element:null!==(a=s.getUser())&&void 0!==a&&a.isPro?"bits_intro_old_pro":"bits_intro_old_free"})})),function(){e.next(),e.complete()}}),[]);return a?o.a.createElement(E.S,{header:a.header,title:a.title,description:a.description,button:a.buttonText,onGetMyBits:function(){var e;u.next({action:"click",element:null!==(e=s.getUser())&&void 0!==e&&e.isPro?"get_bits_intro_old_pro":"get_bits_intro_old_free"}),c.next({type:R.getInitialBits,requestType:"parallel"}),i.close(F.oldUsersGamificationModal)}}):null},Ct=Object(n.memo)((function(){var e=Object(w.f)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.O,{id:F.coursesProgressModal,cssClass:"sl-p-modal"},o.a.createElement(ft,null)),o.a.createElement(pt,null),o.a.createElement(mt,null),o.a.createElement(E.O,{id:F.editProfileModal,cssClass:"edit-profile",onOverlay:function(){return st("settings",e)},closeBtnCallback:function(){return st("settings",e)}},o.a.createElement(dt,null)),o.a.createElement(E.O,{id:F.badgesModal,cssClass:"sl-modal__badges"},o.a.createElement(Ue,null)),o.a.createElement(E.O,{id:F.unlockWithBitsModal,cssClass:"no-padding hide-close"},o.a.createElement(yt,null)),o.a.createElement(E.O,{id:F.followsModal,cssClass:"sl-p-modal"},o.a.createElement(jt,null)),o.a.createElement(E.O,{id:F.certificateModal,cssClass:"sl-p-modal sl-p-modal--certificate"},o.a.createElement(vt,null)),o.a.createElement(E.O,{id:F.codesModal,cssClass:"sl-p-modal"},o.a.createElement(Re,null)),o.a.createElement(E.O,{id:F.succeedCancelSubscription},o.a.createElement(ht,null)),o.a.createElement(E.O,{cssClass:"sl-p-modal connect-linkedin",id:F.connectLinkedinModal},o.a.createElement(_t,null)),o.a.createElement(He,null),o.a.createElement(gt,null),o.a.createElement(E.O,{id:F.oldUsersGamificationModal,cssClass:"hide-close no-padding",keepOnOverlay:!0},o.a.createElement(kt,null)))})),xt=Object(n.memo)((function(e){var t=e.accounts,a=e.theme,n=e.mode;return null!=t&&t.length?o.a.createElement("div",{className:"sl-p-filtered-connected-accounts".concat(n?" sl-p-filtered-connected-accounts--".concat(n||""):"")},null==t?void 0:t.map((function(e){return o.a.createElement("a",{href:e.profileUrl,target:"_blank",key:e.service,className:"".concat("light"===a?"sl-p-filtered-connected-accounts__light":"sl-p-filtered-connected-accounts__dark"," ")},o.a.createElement(S.a,{iconId:"".concat(e.service.toLowerCase(),"Mono")}))}))):null})),Pt=o.a.memo((function(e){var t=e.profileInfo;return"primary"===t.badgeType?o.a.createElement("div",{className:"sl-p-details-badge sl-p-details-badge--primary",style:{backgroundColor:t.badgeBackground}},t.badgeLabel,t.badgeIconId&&o.a.createElement("div",{className:"sl-p-details-badge__icon sl-p-details-badge__icon--primary",style:t.badgeFill?{color:t.badgeFill}:null},o.a.createElement(S.a,{iconId:t.badgeIconId}))):o.a.createElement("div",{className:"sl-p-details-badge sl-p-details-badge--secondary"},o.a.createElement("div",{style:{backgroundColor:t.badgeBackground}},o.a.createElement("div",{className:"sl-p-details-badge__icon sl-p-details-badge__icon--secondary",style:t.badgeFill?{color:t.badgeFill}:null},o.a.createElement(S.a,{iconId:t.badgeIconId}))))})),It=Object(n.memo)((function(e){var t=e.profileInfo,a=e.isFollowing,r=O.b.take("global",O.a),c=Object(n.useState)(!1),i=V(c,2),s=i[0],u=i[1],d=O.b.take(de,se).followingDisableStream,m=O.b.take(de,Ne).actions;Object(n.useEffect)((function(){var e=new l.a;return d.pipe(Object(p.a)((function(e){u(e)}))).subscribe(),function(){e.next(),e.complete()}}),[]);var b=function(e){d.next(!0),m.next({type:R.followProfileToggle,requestType:"parallel",data:{type:e}})};return null!=t&&t.isOwnProfile?null:a?o.a.createElement("button",{disabled:s,className:"sl-p-details__pr-btn sl-p-details__pr-btn--secondary ".concat(t.theme),type:"button","sl-test-data":"followingBtnElement",onClick:function(){return b(R.unfollowProfile)}},"Following"):r.isLoggedIn()?o.a.createElement("button",{disabled:s,type:"button","sl-test-data":"followBtnElement",className:"sl-p-details__pr-btn",onClick:function(){return b(R.followProfile)}},"Follow"):null})),Nt=Object(n.memo)((function(){var e=Object(n.useState)(),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(),i=V(c,2),u=i[0],m=i[1],f=Object(n.useState)(!0),v=V(f,2),g=v[0],h=v[1],y=Object(n.useState)(null),_=V(y,2),w=_[0],j=_[1],k=O.b.take(de,se),C=k.userDetailsStream,x=k.profileInfoStream,P=k.countriesStream,I=k.followingDisableStream,N=O.b.take(de,Ne).actions,M=new l.a;Object(n.useEffect)((function(){return Object(s.a)(C.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){I.next(!1),r(e)}))),x.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){return m(e)}))),P.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){return j(e)})))).pipe(Object(b.a)(M)).subscribe(),function(){M.next(),M.complete()}}),[]);var A=function(e){N.next({type:R.openModalOrRedirectToLogin,requestType:"parallel",data:{updateInfo:a,followsType:e}})},D=Object(n.useMemo)((function(){return function(e){var t,a=null==e?void 0:e.toLowerCase();return null==w||null===(t=w.find((function(e){return e.char2Code.toLowerCase()===a})))||void 0===t?void 0:t.name}}),[w]);return a&&u?o.a.createElement("div",{"sl-test-data":"baseElement"},o.a.createElement(E.J,{config:{title:a.name}}),o.a.createElement("div",{className:"sl-p-details ".concat(u.theme)},o.a.createElement("div",{className:"sl-p-details__avatar__wrapper"},o.a.createElement("div",{className:"sl-p-details__avatar"},null!=a&&a.avatarUrl&&g?o.a.createElement("img",{className:"sl-p-details__avatar-image",src:null==a?void 0:a.avatarUrl,alt:"user-avatar",onError:function(){h(!1)}}):o.a.createElement("div",{className:"sl-p-details__avatar-image sl-p-details__default-avatar"},o.a.createElement("div",{className:"sl-p-details__default-avatar__icon"},o.a.createElement(S.a,{iconId:"avatarFill"}))),o.a.createElement("div",{className:"sl-p-details__badge"},u.badgeType&&o.a.createElement(Pt,{profileInfo:u})))),o.a.createElement("div",{className:"sl-p-details__info"},o.a.createElement("div",{className:"sl-p-details__header sl-p-details__row"},o.a.createElement("div",{className:"sl-p-details__name"},a.name&&o.a.createElement("p",{className:"sl-p-details__name--text ".concat(u.theme)},a.name),o.a.createElement(xt,{accounts:null==a?void 0:a.displayConnectedAccounts,theme:u.theme,mode:"mobile"})),o.a.createElement("div",{className:"sl-p-details__info__actions--desktop"},o.a.createElement(It,{isFollowing:a.isFollowing,profileInfo:u}))),o.a.createElement("div",{className:"sl-p-details__follows sl-p-details__row ".concat(u.theme)},o.a.createElement("button",{type:"button",className:"sl-p-details__follows__button ".concat(a.following?"":"disabled"),onClick:function(){return A("following")}},o.a.createElement("span",{"sl-test-data":"lblFollowingCount"},a.following.toLocaleString())," ","Following"),o.a.createElement("button",{type:"button",className:"sl-p-details__follows__button ".concat(a.followers?"":"disabled"),onClick:function(){return A("followers")}},o.a.createElement("span",{"sl-test-data":"lblFollowersCount"},a.followers.toLocaleString())," ",o.a.createElement("span",{"sl-test-data":"lblFollowersText"},"Follower",1===a.followers?"":"s"))),o.a.createElement("div",{className:"sl-p-details__follows sl-p-details__row ".concat(u.theme)},o.a.createElement("span",{className:"sl-p-details__xp"},o.a.createElement("div",{className:"sl-p-details__xp-icon"},o.a.createElement(S.a,{iconId:"simpleStar"})),a.xp&&o.a.createElement("span",{"sl-test-data":"lblXPCount"},a.xp.toLocaleString()," XP"))),a.bio&&o.a.createElement("p",{className:"sl-p-details__bio sl-p-details__row ".concat(u.theme)},a.bio),o.a.createElement("div",{className:"sl-p-details__country-and-level sl-p-details__row ".concat(u.theme)},a.countryCode&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sl-p-details__country"},o.a.createElement("div",{className:"sl-p-details__country-flag"},o.a.createElement(E.z,{size:"sm",countryCode:a.countryCode})),!(null==w||!w.length)&&o.a.createElement("p",{className:"sl-p-details__country-name"},D(a.countryCode))),o.a.createElement("span",{className:"sl-p-details__country-level-seperator"},"")),a.level&&o.a.createElement("span",{"sl-test-data":"lblLvlNumber"},"Lvl ",a.level.toLocaleString())),o.a.createElement(xt,{accounts:a.displayConnectedAccounts,theme:u.theme,mode:"desktop"}),o.a.createElement("div",{className:"sl-p-details__info__actions--mobile"},o.a.createElement(It,{isFollowing:a.isFollowing,profileInfo:u}))))):o.a.createElement(E.M,null)})),Mt=Object(n.memo)((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),f=V(m,2),v=f[0],g=f[1];return Object(S.Wc)([S.fc,S.hc]),Object(n.useEffect)((function(){var e=O.b.take(de,se).proBannerStream,t=O.b.take(de,se).wasUserProStream,a=new l.a;return e.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(a),Object(p.a)((function(e){r(e);var t="/payments/pro?returnUrl=".concat(encodeURIComponent(window.location.pathname),"&source=").concat(null!=e&&e.isOwnProBanner?"profilebanner":"profileotherbanner");u(t)}))).subscribe(),t.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(a),Object(p.a)((function(e){g(null==e?void 0:e.wasUserPro)}))).subscribe(),function(){a.next(),a.complete()}}),[]),null!=a&&a.showBanner?o.a.createElement("div",{className:"sl-p-pro-banner","sl-test-data":"divProBanner"},o.a.createElement("div",{className:"sl-p-pro-banner__desktop"},o.a.createElement("p",{className:"sl-p-pro-banner__desktop__logo"},"Sololearn",o.a.createElement("span",{className:"sl-p-pro-banner__desktop__logo--pro"},"PRO")),o.a.createElement("p",{className:"sl-p-pro-banner__desktop__message"},v?"Practice for 12 more months.":"Get 14 days of Free PRO experience.")),o.a.createElement("div",{className:"sl-p-pro-banner__icon--desktop"},o.a.createElement(S.a,{iconId:"proBannerDesktopOrange"})),o.a.createElement("div",{className:"sl-p-pro-banner__mobile"},o.a.createElement("div",{className:"sl-p-pro-banner__mobile__icon"},o.a.createElement(S.a,{iconId:"proBannerMobileOrange"})),o.a.createElement("div",{className:"sl-p-pro-banner__mobile__icon--gradient"}),o.a.createElement("p",{className:"sl-p-pro-banner__mobile__message"},v?"Practice for 12 more months.":"Get 14 days of Free PRO experience.")),o.a.createElement(w.a,{to:s},o.a.createElement("button",{type:"button",className:"sl-p-pro-banner__action"},"Start Today"))):null})),At=Object(n.memo)((function(e){var t=e.children,a=e.cssClass;return o.a.createElement("div",{className:"sl-profile-widget ".concat(a||"")},t)})),Dt=o.a.memo((function(e){var t=e.message;return o.a.createElement("div",{className:"sl-p-empty-widget"},t)})),Tt=Object(n.memo)((function(){var e=Object(n.useState)(),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)([]),f=V(m,2),v=f[0],g=f[1],h=Object(n.useState)(!1),y=V(h,2),_=y[0],S=y[1],E=O.b.take(de,se),j=E.coursesProgressStream,k=E.profileInfoStream,C=O.b.take(de,ie).trackAction,x=O.b.take(de,ue).coursesProgressItemLoadingStream,P=O.b.take(de,Ne).actions;Object(n.useEffect)((function(){var e=new l.a;return j.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){e.length>3&&S(!0);var t=e?e.slice(0,3):null;r(t)}))).subscribe(),k.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){return u(e.isOwnProfile)}))).subscribe(),x.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){g(e)}))).subscribe(),function(){e.next(),e.complete()}}),[]);var I=function(){P.next({type:R.openCoursesProgressModal,requestType:"parallel"})};return a&&(null!=a&&a.length||s)?o.a.createElement(At,null,o.a.createElement("div",{className:"sl-p-courses"},o.a.createElement("div",{className:"sl-p-courses__header"},o.a.createElement("h3",{className:"sl-p-courses__title"},"Courses Progress"),!s&&!_||s&&(null==a||!a.length)?null:o.a.createElement("button",{onClick:I,className:"sl-p-courses__show-all",type:"button"},s?"Manage":"Show All")),null!=a&&a.length?a.map((function(e){return o.a.createElement(bt,{courseProgress:e,isPreview:!0,key:e.courseId,loading:v.includes(e.courseId),isOwnProfile:s})})):o.a.createElement(Dt,{message:"You havent started any courses yet"}),s?o.a.createElement(w.a,{onClick:function(){C.next({action:"click",element:"browse_courses_profile",entityId:null})},to:"/learning"},o.a.createElement("button",{className:"sl-p-courses__browse",type:"button"},"Browse Courses")):null)):null})),Ut=Object(n.memo)((function(e){var t=e.certificate,a=e.onSelect;return o.a.createElement("div",{className:"sl-p-cert-item__container"},o.a.createElement("div",{onClick:function(){return a(t)},className:"sl-p-cert-item"},o.a.createElement("div",{className:"sl-p-cert-item__image",style:{backgroundColor:t.courseColor}},o.a.createElement("img",{className:"sl-p-cert-item__image__icon",src:t.iconURL,alt:"course-icon"})),o.a.createElement("p",{className:"sl-p-cert-item__name"},t.name)))})),Lt=Object(n.memo)((function(e){var t=e.cssClass,a=e.scrollState,n=e.directionHandler;return e.isShown?o.a.createElement("div",{className:"sl-p-slider-arrows ".concat(t||"")},o.a.createElement("button",{className:"sl-p-slider-arrows__arrow sl-p-slider-arrows__arrow--previous ".concat(!a.hasLeftScroll&&"sl-p-slider-arrows__arrow--disable"),onClick:function(){return n({direction:"left"})},type:"button"},o.a.createElement(S.a,{iconId:"caretDown"})),o.a.createElement("button",{className:"sl-p-slider-arrows__arrow sl-p-slider-arrows__arrow--next ".concat(!a.hasRightScroll&&"sl-p-slider-arrows__arrow--disable"),onClick:function(){return n({direction:"right"})},type:"button"},o.a.createElement(S.a,{iconId:"caretDown"}))):null})),Bt=Object(n.memo)((function(){var e=Object(n.useState)(),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)({hasLeftScroll:!1,hasRightScroll:!1}),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)(),f=V(m,2),v=f[0],g=f[1],h=Object(n.useState)(null),y=V(h,2),_=y[0],S=y[1],w=O.b.take(de,se).certificatesStream,j=O.b.take(de,Ne).actions,k=function(e){j.next({requestType:"parallel",type:R.openCertificateModal,data:{selectedCertificate:e}})};return Object(n.useEffect)((function(){var e=new l.a;return w.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){r(e),S(null==e?void 0:e.length)}))).subscribe(),function(){e.next(),e.complete()}}),[]),null!=a&&a.length?o.a.createElement(At,{cssClass:"slider"},o.a.createElement("div",{className:"sl-p-certificates","sl-test-data":"cmpCertificates"},o.a.createElement("div",{className:"sl-p-certificates__header"},o.a.createElement("h3",{className:"sl-p-certificates__title"},"Certificates"),o.a.createElement(Lt,{cssClass:"slider-arrows-margin",isShown:a.length>1,scrollState:s,directionHandler:g})),o.a.createElement(E.K,{scroll:v,onStateChange:u,itemsCount:_},a.map((function(e){return o.a.createElement(Ut,{certificate:e,key:e.name,onSelect:k})}))))):null})),Ft=Object(n.memo)((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=V(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),f=V(m,2),v=f[0],g=f[1],h=O.b.take(de,se),y=h.userCodesStream,_=h.profileInfoStream,S=O.b.take(de,ie).trackAction,w=O.b.take(de,Ne).actions,E=O.b.take(de,"playgroundUrl");Object(n.useEffect)((function(){var e=new l.a;return y.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){e.length>3&&g(!0),r(e.slice(0,3))}))).subscribe(),_.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){return u(e.isOwnProfile)}))).subscribe(),function(){e.next(),e.complete()}}),[]);var j=function(){w.next({type:R.openCodesModal,requestType:"parallel"})};return a&&(null!=a&&a.length||s)?o.a.createElement(At,null,o.a.createElement("div",{className:"sl-p-codes"},o.a.createElement("div",{className:"sl-p-codes__header"},o.a.createElement("h3",{className:"sl-p-codes__title"},"Code Bits"),!s&&!v||s&&(null==a||!a.length)?null:o.a.createElement("button",{onClick:j,className:"sl-p-codes__show-all",type:"button"},s?"Manage":"Show All")),null!=a&&a.length?a.map((function(e){return o.a.createElement(Fe,{key:e.id,code:e,isPreview:!0,isOwnProfile:s})})):o.a.createElement(Dt,{message:"You dont have any saved codes yet"}),s?o.a.createElement("a",{onClick:function(){S.next({action:"click",element:"new_code_profile",entityId:null})},className:"sl-p-codes__add",href:E,target:"_blank"},"Add New"):null)):null})),Rt=o.a.memo((function(e){var t=e.badge,a=e.onClick;return o.a.createElement("button",{className:"sl-p-badge-item",type:"button",onClick:a},o.a.createElement("img",{className:"sl-p-badge-item__image",src:t.iconURL,alt:"badge-icon",style:{backgroundColor:t.isUnlocked?t.color:"#C8D2DB"}}))})),Ht=o.a.memo((function(e){var t=e.task,a=e.onClick;return o.a.createElement("button",{className:"sl-p-task",type:"button",onClick:a},o.a.createElement("div",{className:"sl-p-task__item"},o.a.createElement("img",{className:"sl-p-task__item__image",src:t.iconURL,style:{backgroundColor:t.isUnlocked?t.color:"#C8D2DB"},alt:"task-icon"})),o.a.createElement("div",{className:"sl-p-task__item__info"},o.a.createElement("h5",{className:"sl-p-task__item__title"},t.title),o.a.createElement("p",{className:"sl-p-task__item__description"},t.description)))})),qt=function(){var e=Object(n.useState)(),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(),i=V(c,2),s=i[0],u=i[1],d=O.b.take(de,se),p=d.profileRecentBadgesStream,m=d.profileNextTaskStream,f=d.userDetailsStream,v=O.b.take(de,Ne).actions,g=O.b.take(de,ie).trackAction;Object(n.useEffect)((function(){var e=new l.a;return p.pipe(Object(b.a)(e)).subscribe(r),m.pipe(Object(b.a)(e)).subscribe(u),function(){e.next(),e.complete()}}),[]);var h=Object(n.useCallback)((function(){g.next({action:"click",element:"see_achvments_profile",entityId:f.value.id}),v.next({type:R.openBadgesModal,requestType:"parallel"})}),[]),y=Object(n.useCallback)((function(e){g.next({action:"click",element:"achvment_profile",entityId:f.value.id}),v.next({type:R.openBadge,requestType:"parallel",data:{badgeId:e}})}),[]);return o.a.createElement(At,null,o.a.createElement("div",{className:"sl-p-badges"},o.a.createElement("div",{className:"sl-p-badges__header"},o.a.createElement("h3",{className:"sl-p-badges__title"},"Recent Achievements")),a&&a.length?o.a.createElement("div",{className:"sl-p-badges__items"},a.map((function(e){return o.a.createElement(Rt,{badge:e,key:e.id,onClick:function(){return y(e.id)}})}))):o.a.createElement("div",{className:"sl-p-badges__no-badges-text"},s?o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"You dont have any achievements yet."),o.a.createElement("p",null,"Follow the next task to get started!")):o.a.createElement("p",null,"No achievements yet."))),s?o.a.createElement("div",{className:"sl-p-next-task"},o.a.createElement("div",{className:"sl-p-next-task__header"},o.a.createElement("h3",{className:"sl-p-next-task__title"},"Next task")),o.a.createElement(Ht,{task:s,onClick:function(){return y(s.id)}})):null,o.a.createElement("button",{type:"button",className:"sl-p-all-badges-button",onClick:h},"See More"))},Wt=Object(n.memo)((function(e){var t=e.item,a=e.openCodeCoach,r=t.xp,l=t.courseName,c=t.description,i=t.name,s=t.state,u=t.shopItem,d=Object(n.useCallback)((function(e){var t="https://assets.sololearn.com/ccicon/ccIcon";return"".concat(t,e>=100?"Hard.png":e>=50?"Medium.png":"Easy.png")}),[]);return o.a.createElement("div",{className:"sl-p-code-coach__container"},o.a.createElement("div",{className:"sl-p-code-coach__item"},o.a.createElement("div",{className:"sl-p-code-coach__body"},o.a.createElement("div",{className:"sl-p-code-coach__icon"},o.a.createElement("img",{src:d(r),alt:"code-coach-icon"})),o.a.createElement("div",{className:"sl-p-code-coach__info"},o.a.createElement("h5",{className:"sl-p-code-coach__name"},i),o.a.createElement("p",{className:"sl-p-code-coach__description"},c),o.a.createElement("div",{className:"sl-p-code-coach__tags"},o.a.createElement("div",{className:"sl-p-code-coach__tag sl-p-code-coach__tag--language"},l),s===j.s.userIsPro||s===j.s.unlocked?o.a.createElement("div",{className:"sl-p-code-coach__tag sl-p-code-coach__tag--pro"},o.a.createElement("div",{className:"sl-p-code-coach__tag--pro--icon"},o.a.createElement(S.a,{iconId:"check"})),"PRO"):null,s===j.s.unlock||s===j.s.pro?o.a.createElement("div",{className:"sl-p-code-coach__tag sl-p-code-coach__tag--pro"},"PRO"):null,s===j.s.unlocked?o.a.createElement("div",{className:"sl-p-code-coach__tag--icon"},o.a.createElement(S.a,{iconId:"bit1Cube"})):null))),o.a.createElement("button",{type:"button",className:"sl-p-code-coach__action",onClick:function(){return a(t)}},function(){switch(s){case j.s.userIsPro:case j.s.isOpen:case j.s.pro:return o.a.createElement("div",null,"Practice (+ ".concat(r,"XP)"));case j.s.unlocked:return o.a.createElement("div",null,"Practice");case j.s.unlock:return o.a.createElement("div",{className:"sl-p-code-coach__action__button"},"Unlock",o.a.createElement("span",{className:"sl-p-code-coach__action__button__icon"},o.a.createElement(S.a,{iconId:"bit1Cube"})),null==u?void 0:u.price);default:return null}}())))}));function Gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Vt=Object(n.memo)((function(){var e=Object(n.useState)(),t=V(e,2),a=t[0],r=t[1],i=Object(n.useState)(null),s=V(i,2),u=s[0],m=s[1],f=Object(n.useState)(null),v=V(f,2),g=v[0],y=v[1],_=Object(n.useState)(null),S=V(_,2),w=S[0],k=S[1],C=Object(n.useState)(!1),x=V(C,2),P=x[0],I=x[1],N=Object(n.useState)({hasLeftScroll:!1,hasRightScroll:!1}),M=V(N,2),A=M[0],D=M[1],T=Object(n.useState)(!1),U=V(T,2),L=U[0],B=U[1],F=Object(n.useState)(),H=V(F,2),q=H[0],W=H[1],G=Object(n.useState)(!1),z=V(G,2),Y=z[0],X=z[1],K=Object(n.useState)(),$=V(K,2),Q=$[0],Z=$[1],ee=O.b.take(de,se),te=ee.codeCoachesStream,ae=ee.profileInfoStream,ne=ee.shopItemsStream,oe=ee.allOpenedCodeCoachesStream,re=ee.freeClickExperimentDataStream,le=ee.dailyDoseFreeCCStream,ce=O.b.take(de,Ne).actions,ie=O.b.take("global",O.a),ue=O.b.take("global","featureTogglingConfigs"),pe=ue[E.N.mfProfile][E.G.freeClickCC].state,me=ue[E.N.mfProfile][E.G.dailyDose].state,be=Object(n.useCallback)((function(e){return 0===e.length?"No available Code Coaches. Learn a course to get one.":"Hey! You missed on some challenges."}),[a]),ve=Object(n.useCallback)((function(e,t){var a=t;return 0===e.length&&(a+=" ".concat(t,"__empty")),1===e.length&&(a+=" ".concat(t,"__single")),a}),[a]),ge=Object(n.useCallback)((function(e){ce.next({type:R.openCodeCoach,requestType:"parallel",data:{codeCoach:e}})}),[P]);return Object(n.useEffect)((function(){var e,t=new l.a;return ae.pipe(Object(d.a)((function(e){return!!e})),Object(h.a)((function(e){return B(e.isOwnProfile),e.isOwnProfile?te.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){r(e)}))):Object(c.a)(null)})),Object(b.a)(t)).subscribe(),ne.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){m(e)}))).subscribe(),oe.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){y(e)}))).subscribe(),"enabled"===pe&&re.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){return k(e.pages.find((function(e){return"freeCCCount"===e.pageName})).data)}))).subscribe(),"enabled"===me?(ce.next({type:R.getExperiments,requestType:"parallel"}),le.pipe(Object(b.a)(t)).subscribe((function(e){Z(null==e?void 0:e.list),X(!!e)}))):X(!0),I(null===(e=ie.getUser())||void 0===e?void 0:e.isPro),function(){t.next(),t.complete()}}),[]),Object(n.useEffect)((function(){if(null!=a&&a.length&&u&&g&&!a.find((function(e){return Object.prototype.hasOwnProperty.call(e,"state")}))&&Y){var e,t=a.map((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);if(P)Q&&Q.includes(t.id)?t.state=j.s.isOpen:t.state=j.s.userIsPro;else{var a=g[t.courseId];if(!a&&0!==(null==w?void 0:w.codeCoachCount)||null!=a&&a.includes(t.id)||"enabled"===pe&&(null==a?void 0:a.length)<(null==w?void 0:w.codeCoachCount))t.state=j.s.isOpen;else{var n,o=null===(n=u.codeCoaches)||void 0===n?void 0:n.find((function(e){return e.itemId===t.id}));o?(t.shopItem=o,o.isBought?t.state=j.s.unlocked:t.courseId!==fe||t.isPro?t.state=j.s.unlock:t.state=j.s.isOpen):t.state=j.s.pro}}return t}));r(t);var n=new URLSearchParams(location.search);if((null===(e=ie.getUser())||void 0===e||!e.isPro)&&n.has("modal")){var o=null==t?void 0:t.find((function(e){return e.id===+n.get("ccid")}));ge(o)}}}),[a,u,g,P,Y]),Y&&a&&L?o.a.createElement(At,{cssClass:"slider"},o.a.createElement("div",{className:ve(a,"sl-p-code-coach")},o.a.createElement("div",{className:"sl-p-code-coach__header"},o.a.createElement("div",{className:"sl-p-code-coach__header__primary"},o.a.createElement("h3",{className:"sl-p-code-coach__title"},"Code Coach"),o.a.createElement(Lt,{cssClass:"slider-arrows-margin",scrollState:A,isShown:a.length>1,directionHandler:W})),o.a.createElement("p",{className:"sl-p-code-coach__message"},be(a))),a.length>0&&o.a.createElement(E.K,{scroll:q,onStateChange:D},a.map((function(e){return o.a.createElement(Wt,{key:e.id,item:e,isProUser:P,openCodeCoach:ge})}))))):null})),zt=o.a.memo((function(e){var t=e.contnentRef,a=Object(n.useState)(null),r=V(a,2),c=r[0],i=r[1],s=Object(n.useState)(400),u=V(s,2),m=u[0],f=u[1],v=Object(n.useState)(!1),g=V(v,2),h=g[0],y=g[1],_=O.b.take(de,se).profileInfoStream,S=Object(E.ub)();Object(n.useEffect)((function(){var e=new l.a;return _.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){i(e)}))).subscribe(),function(){e.next(),e.complete()}}),[]),Object(n.useEffect)((function(){var e=t.current.offsetTop;S<600?(f(e+72),y(!0)):(f(e+57),y(!1))}),[c,S]);var w;return o.a.createElement("div",{style:{height:m},className:"sl-p-dynamic-oval ".concat(h?"sl-p-dynamic-oval--mobile":"")},(w=null==c?void 0:c.type,[q.basic,q.bronze,q.silver,q.gold,q.platinium].includes(w)?o.a.createElement(E.U,{cssClass:"sl-p-basic",backgroundColor:"#6B7F99"}):w===q.pro?o.a.createElement(E.U,{cssClass:"sl-p-pro",backgroundColor:"#2C3E47"}):null))})),Yt=Object(n.memo)((function(){return o.a.createElement("div",{className:"sl-p-empty-profile"},o.a.createElement("div",{className:"sl-p-empty-profile__icon"},o.a.createElement(S.a,{iconId:"envelopIllustration"})),o.a.createElement("h2",{className:"sl-p-empty-profile__info-header"},"Nothing to see yet"),o.a.createElement("p",{className:"sl-p-empty-profile__info-desc"},"This user has just started their journey, try checking out their profile later."))})),Jt=o.a.memo((function(){return o.a.createElement("div",{className:"sl-p-not-found"},o.a.createElement("h2",{className:"sl-p-not-found__info-header"},"Sorry, couldnt find anything."),o.a.createElement("p",{className:"sl-p-not-found__info-desc"},"The link you followed may be broken, or the page may have been removed."),o.a.createElement("a",{href:"/",className:"sl-p-not-found__link"},"Go to Homepage"))})),Xt=o.a.memo((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){var e=new l.a,t=O.b.take(de,se),a=t.profileInfoStream,n=t.animationsStream,o=O.b.take(de,Ne).actions;return a.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){var t,a,n=(t=e.type,a=Object(E.lb)().isMobile,t===q.platiniumMod?a?["platinum-left-bubble"]:["platinum-left-bubble","platinum-right-bubble"]:t===q.goldMod?a?["gold-left-bubble"]:["gold-left-bubble","gold-right-bubble"]:t===q.mod?a?["moderator-left-bubble"]:["moderator-left-bubble","moderator-right-bubble"]:null);o.next({type:R.getAnimations,requestType:"parallel",data:{animationNames:n}})})),Object(b.a)(e)).subscribe(),n.pipe(Object(p.a)((function(e){r(e)})),Object(b.a)(e)).subscribe(),function(){e.next(),e.complete()}}),[]);var c=Object(n.useCallback)((function(e){return 0===e?"sl-p-animation__bubble-left":1===e?"sl-p-animation__bubble-right":""}),[a]);return null!=a&&a.length?o.a.createElement("div",{className:"sl-p-animation"},a.map((function(e,t){return o.a.createElement(N.a,{key:t,animationData:e,className:"sl-p-animation__bubble ".concat(c(t))})}))):null}));function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Qt=o.a.memo((function(){var e=O.b.take(de,se).flashMessageStream,t=Object(n.useState)(null),a=V(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){var t=new l.a;return e.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(t)).subscribe(c),function(){t.next(),t.complete()}}),[]);return r?o.a.createElement(E.H,{data:$t({},r),didClosed:function(){c(null),e.next(null)}}):null})),Zt=o.a.memo((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=O.b.take(de,se).deviceInfoStream,i=O.b.take(de,ie).trackAction;return Object(n.useEffect)((function(){var e=new l.a;return c.pipe(Object(b.a)(e)).subscribe((function(e){e&&r(e.os)})),function(){e.next(),e.complete()}}),[]),o.a.createElement(E.R,{os:a,onCloseClick:function(){c.next(null),i.next({action:"click",element:"featureUnavailability_close",entityId:null})},onMobileStoreClick:function(){i.next({action:"click",element:"featureUnavailability_getInStore",entityId:null})}})})),ea=Object(n.memo)((function(){var e=Object(n.useState)(null),t=V(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=V(c,2),u=i[0],m=i[1],f=Object(n.useState)(!1),v=V(f,2),g=v[0],h=v[1],y=O.b.take(de,se),_=y.welcomeBackExperimentDataStream,S=y.userDataStream,k=O.b.take(de,ie).trackAction;Object(n.useEffect)((function(){var e,t=new l.a,a=O.b.take(de,Ne).actions,n=O.b.take(de,se).profileInfoStream,o=O.b.take("global",O.a);return null!=n&&null!==(e=n.value)&&void 0!==e&&e.isOwnProfile&&a.next({requestType:"parallel",type:R.getWelcomeBackExperimentData,data:{userId:o.getUser().id}}),Object(s.a)(n.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){h(e.isOwnProfile)}))),_.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){r(e)}))),S.pipe(Object(d.a)((function(e){return!!e})),Object(p.a)((function(e){m(e)})))).pipe(Object(b.a)(t)).subscribe(),function(){t.next(),t.complete()}}),[]);var C=O.b.take(de,Ne).actions,x=function(e,t){return function(){k.next({action:"view",element:"welcomeback_profile_".concat(e),entityId:t})}};return u&&g&&a?o.a.createElement("div",{className:" sl-p-welcome-back__container"},o.a.createElement("div",{className:"sl-p-welcome-back-max"},function(){var e,t,n=u.moduleId,r=u.moduleName,l=u.codeCoachInfo,c=u.courseId,i=u.lessonName,s=u.lessonId,d=u.courseLanguage,p=u.isCurrentCourseCompleted,m=u.coursesCount;if(null==u||!u.courseId){var b=null==a?void 0:a.pages.find((function(e){return(null==e?void 0:e.pageName)===j.N.course})),f=null==b?void 0:b.data,v=f.title,g=f.buttonText,h=f.description;return o.a.createElement(E.gb,{contentType:j.N.course,title:v,subTitle:h,buttonText:g,coursesCount:m,id:c,onClick:function(){return function(e){k.next({action:"click",element:"welcomeback_profile_course",entityId:e}),Object(w.e)("/learning")}(c)},onMount:x("course",c)})}if(l&&null!=l&&l.id){if(0===u.codeCoachInfo.type){var y=null==a?void 0:a.pages.find((function(e){return(null==e?void 0:e.pageName)===j.N.codeCoach})),_=null==y?void 0:y.data,O=_.title,S=_.buttonText;return o.a.createElement(E.gb,{contentType:j.N.codeCoach,title:O,buttonText:S,subTitle:l.title,description:l.description,iconUrl:(e=l.xp,t="https://assets.sololearn.com/ccicon/ccIcon","".concat(t,e>=100?"Hard.png":e>=50?"Medium.png":"Easy.png")),xp:l.xp,id:l.id,onClick:function(){return e=l.id,t=d,k.next({action:"click",element:"welcomeback_profile_cc",entityId:e}),void C.next({type:R.goCodeCoach,requestType:"parallel",data:{codeCoachId:e,language:t}});var e,t},onMount:x("cc",l.id)})}if(1===u.codeCoachInfo.type){var P=null==a?void 0:a.pages.find((function(e){return"endOfModule"===(null==e?void 0:e.pageName)})),I=null==P?void 0:P.data,N=I.title,M=I.buttonText;return o.a.createElement(E.gb,{contentType:j.N.endOfModule,title:N,buttonText:M,subTitle:l.title,iconUrl:l.iconUrl||"https://api.sololearn.com/Uploads/Code%20coach%20icons/Group_1123.png",id:l.id,onClick:function(){return function(e,t,a){k.next({action:"click",element:"welcomeback_profile_eom",entityId:a}),C.next({type:R.goEndOfModule,requestType:"parallel",data:{courseId:e,codeCoachId:a}})}(c,0,l.id)},onMount:x("eom",l.id)})}}if(!p){if(u.isFristLesson){var A=null==a?void 0:a.pages.find((function(e){return(null==e?void 0:e.pageName)===j.N.module})),D=null==A?void 0:A.data,T=D.title,U=D.buttonText;return o.a.createElement(E.gb,{contentType:j.N.module,title:T,buttonText:U,moduleName:r,id:n,iconUrl:"https://sololearnuploads.azureedge.net/uploads/modules/".concat(c,"/").concat(n,".png"),onClick:function(){return function(e,t){k.next({action:"click",element:"welcomeback_profile_module",entityId:t}),Object(w.e)("/learning/".concat(e,"/").concat(t))}(c,s)},onMount:x("module",s)})}var L=null==a?void 0:a.pages.find((function(e){return(null==e?void 0:e.pageName)===j.N.lesson})),B=null==L?void 0:L.data,F=B.title,H=B.buttonText;return o.a.createElement(E.gb,{contentType:j.N.lesson,title:F,buttonText:H,subTitle:"Lesson",description:i,id:s,onClick:function(){return function(e,t){k.next({action:"click",element:"welcomeback_profile_lesson",entityId:t}),Object(w.e)("/learning/".concat(e,"/").concat(t))}(c,s)},onMount:x("lesson",s)})}return null}())):null})),ta=Object(n.memo)((function(e){var t=e.profileId,a=Object(n.useState)("loading"),r=V(a,2),c=r[0],i=r[1],s=Object(n.useState)(!1),u=V(s,2),m=u[0],f=u[1],v=O.b.take(de,Ne).actions,g=Object(w.f)(),h=Object(n.useRef)();Object(n.useEffect)((function(){var e=new l.a,t=O.b.take(de,se),a=t.profileState,n=t.deviceInfoStream;return a.pipe(Object(d.a)((function(e){return!!e})),Object(b.a)(e),Object(p.a)((function(e){i(e)}))).subscribe(),n.pipe(Object(b.a)(e),Object(p.a)((function(e){f((null==e?void 0:e.isMobile)||!1)}))).subscribe(),v.next({requestType:"parallel",type:R.getFreeClickExperiment}),v.next({requestType:"parallel",type:R.getWasUserPro}),function(){e.next(),e.complete()}}),[]),Object(n.useEffect)((function(){new URLSearchParams(window.location.search).get("settings")&&v.next({type:R.openEditProfileModal,requestType:"parallel"})}),["loaded"===c,null==g?void 0:g.search]),Object(n.useEffect)((function(){"loaded"===c&&v.next({requestType:"parallel",type:R.getldUsersGamification,data:{userId:Number(t)}})}),[c]),Object(n.useEffect)((function(){t&&v.next({requestType:"cancelable",type:R.getProfile,data:{profileId:t}})}),[t]);var y;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sl-p-container"},"notFound"===(y=c)?o.a.createElement(Jt,null):"empty"===y?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,{contnentRef:h}),o.a.createElement(Xt,null),o.a.createElement("div",{className:"sl-p-container__center"},o.a.createElement(Nt,null),o.a.createElement("div",{className:"sl-p-container__content",ref:h},o.a.createElement(Mt,null),o.a.createElement(Yt,null)))):"loading"===y?o.a.createElement(E.M,null):"loaded"===y?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,{contnentRef:h}),o.a.createElement(Xt,null),o.a.createElement("div",{className:"sl-p-container__center"},o.a.createElement(Nt,null),o.a.createElement("div",{className:"sl-p-container__content",ref:h},o.a.createElement(Mt,null),o.a.createElement(ea,null),o.a.createElement("section",{className:"sl-p-container__center__widgets"},o.a.createElement("div",{className:"sl-p-container__center__widgets__column"},o.a.createElement(Tt,null),o.a.createElement(Bt,null),o.a.createElement(Ft,null)),o.a.createElement("div",{className:"sl-p-container__center__widgets__column"},o.a.createElement(qt,null),o.a.createElement(Vt,null))))),o.a.createElement(Qt,null)):null),("loaded"===c||"empty"===c)&&o.a.createElement(Ct,null),m&&o.a.createElement(Zt,null))})),aa=Object(n.memo)((function(e){var t=e.configs,a=e.profileId,r=Object(n.useState)(!1),c=V(r,2),s=c[0],u=c[1],d=Object(n.useState)(),p=V(d,2),m=p[0],f=p[1];return Object(n.useEffect)((function(){f(a)}),[a]),Object(S.Wc)([S.C,S.bb,S.ec,S.gc,S.dc,S.lc,S.db,S.j,S.rc,S.o,S.vc,S.Xb,S.Sb,S.Vc,S.T,S.Jc,S.Eb,S.mb,S.Kc,S.nb,S.Fb,S.P,S.H,S.s]),Object(n.useEffect)((function(){Object.keys(t).forEach((function(e){O.b.register(de,e,t[e])})),u(!0);var e=O.b.take(de,Ne).actionsStream,a=O.b.take(de,ie),n=a.trackActionStream,o=a.tagManagerStream,r=new l.a;return Object(i.a)([e,n,o]).pipe(Object(b.a)(r)).subscribe(),function(){r.next(),r.complete(),O.b.reset(de)}}),[]),s?o.a.createElement("div",{className:"sl-profile"},o.a.createElement(ta,{profileId:m})):null}))}}]);